<form name="editForm" role="form" novalidate #editForm="ngForm">
    <div class="modal-header">
        <h4 class="modal-title text-center text-uppercase" id="myProjectWorkflowsLabel" jhiTranslate="dtmsApp.projectWorkflows.home.createOrEditLabel">Create or edit a Project Workflows</h4>
    </div>
    <div class="modal-body">
        <!--<jhi-alert-error></jhi-alert-error>-->
        <ngb-tabset class="tabbable-line" type="pills" (tabChange)="tagChangeStatus($event)">
            <ngb-tab id="Package">
                <ng-template ngbTabTitle>
                    <span jhiTranslate="global.menu.entities.packages" class="title">Packages</span>
                </ng-template>
                <ng-template ngbTabContent>
                    <jhi-workflow-items [(workflowObject)] = "packageWorkflow"></jhi-workflow-items>
                    <jhi-workflow-items *ngIf="(packageWorkflowCustomFields.entityDTO && packageWorkflowCustomFields.entityDTO.length > 0) || newCustomFieldPackage" (editProperties)="editCustomFieldProperties($event)" (deleteProperties)="deleteProperties($event)" [hasActions]="true" [pageName]="tabChange" [newCustomField]="newCustomFieldPackage" [(listCustomFieldScreen)]="listCustomFieldScreenPackage" [(workflowObject)]="packageWorkflowCustomFields"></jhi-workflow-items>
                </ng-template>
            </ngb-tab>
            <ngb-tab id="Workflow">
                <ng-template ngbTabTitle >
                    <span jhiTranslate="global.menu.entities.activity" class="title">Process Flow</span>
                </ng-template>
                <ng-template ngbTabContent>
                    <jhi-workflow-process class="content float-left" [(taskWorkflowVM)] = "taskWorkflowVM" [(workflowObject)] = "taskWorkflow"></jhi-workflow-process>
                </ng-template>
            </ngb-tab>
            <ngb-tab id="Task">
                <ng-template ngbTabTitle>
                    <span jhiTranslate="global.menu.entities.tasks" class="title">Tasks</span>
                </ng-template>
                <ng-template ngbTabContent>
                    <jhi-workflow-items [(workflowObject)] = "taskWorkflow" [hasOPColumn] = "true"></jhi-workflow-items>
                    <jhi-workflow-items *ngIf="(taskWorkflowCustomFields.entityDTO && taskWorkflowCustomFields.entityDTO.length > 0) || newCustomFieldTask" (editProperties)="editCustomFieldProperties($event)" (deleteProperties)="deleteProperties($event)" [hasOPColumn] = "true" [pageName]="tabChange" [hasActions]="true" [newCustomField]="newCustomFieldTask" [(listCustomFieldScreen)]="listCustomFieldScreenTask" [(workflowObject)]="taskWorkflowCustomFields"></jhi-workflow-items>
                </ng-template>
            </ngb-tab>
        </ngb-tabset>
        <div *ngIf="tabChange !== 'Workflow'">
            <div>
                <input type="text" style="width: 171px; margin-bottom: 5px; float: left" class="txt_search form-control" name="search" id="field_search"
                       [(ngModel)]="searchCustomField" (keypress)="searchCustomFields($event)" autocomplete="off">
                <button style="margin-left: 8px" class="btn default" (click)="searchCustomFields('search')">
                    <span class="fa fa-search"></span>Search Custom Field</button>
            </div>
            <div *ngIf="tMSCustomFields">
                <div class="portlet-body">
                    <table class="table table-striped table-bordered table-hover table-checkable order-column" id="sample_2">
                        <thead>
                        <tr>
                            <th jhiTranslate="dtmsApp.tMSCustomField.properties.headerName"> Header Name </th>
                            <th jhiTranslate="dtmsApp.tMSCustomField.properties.type"> Type </th>
                            <th jhiTranslate="dtmsApp.tMSCustomField.properties.value"> Value </th>
                            <th> Action </th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="odd gradeX" *ngFor="let customField of tMSCustomFields">
                            <td> {{customField.entityData.headerName}} </td>
                            <td> {{customField.entityData.type}} </td>
                            <td> {{customField.entityData.value}} </td>
                            <td>
                                <button [disabled]="checkFieldName(customField)" (click)="showPopupCustomField(customField)" replaceUrl="true"
                                        queryParamsHandling="merge" class="btn btn-sm">
                                    <span><i class="fa fa-angle-up"></i></span>
                                </button>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <!--<button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="clear()">
            <span class="fa fa-ban"></span><span jhiTranslate="entity.action.cancel">Cancel</span>
        </button>-->
        <button type="submit"
                (click)="previousState()"
                class="btn btn-info">
            <span class="fa fa-arrow-left"></span>&nbsp;<span jhiTranslate="entity.action.back"> Back</span>
        </button>
        <button type="submit" (click)="save()" [disabled]="editForm.form.invalid || isSaving" class="btn btn-primary">
            <span class="fa fa-save"></span><span jhiTranslate="entity.action.save">Save</span>
        </button>
    </div>
</form>
