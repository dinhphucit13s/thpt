(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core'), require('rxjs'), require('rxjs/operators'), require('@angular/common'), require('ng-wormhole')) :
    typeof define === 'function' && define.amd ? define('angular-dropdown', ['exports', '@angular/core', 'rxjs', 'rxjs/operators', '@angular/common', 'ng-wormhole'], factory) :
    (factory((global['angular-dropdown'] = {}),global.ng.core,global.rxjs,global.rxjs.operators,global.ng.common,global.ngWormhole));
}(this, (function (exports,core,rxjs,operators,common,ngWormhole) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AngularDropdownControlDirective = /** @class */ (function () {
        function AngularDropdownControlDirective(dropdown, element) {
            this.dropdown = dropdown;
            this.element = element;
        }
        /**
         * @param {?} e
         * @return {?}
         */
        AngularDropdownControlDirective.prototype.onClick = /**
         * @param {?} e
         * @return {?}
         */
            function (e) {
                e.stopPropagation();
                if (!this.dropdown.disabled) {
                    this.dropdown.toggle();
                }
            };
        AngularDropdownControlDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[ng-dropdown-control],[ngDropdownControl]',
                        host: {
                            '[attr.aria-haspopup]': 'true',
                            '[attr.aria-controls]': 'dropdown.id',
                            '[attr.aria-expanded]': 'dropdown.isOpen',
                            '[class.ng-dropdown-control]': 'true',
                            '[class.active]': 'dropdown.isOpen'
                        }
                    },] }
        ];
        AngularDropdownControlDirective.ctorParameters = function () {
            return [
                { type: AngularDropdownDirective, decorators: [{ type: core.Host }, { type: core.Inject, args: [core.forwardRef(function () { return AngularDropdownDirective; }),] }] },
                { type: core.ElementRef }
            ];
        };
        AngularDropdownControlDirective.propDecorators = {
            onClick: [{ type: core.HostListener, args: ['click', ['$event'],] }]
        };
        return AngularDropdownControlDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /**
     * @param {?} element
     * @param {?} callback
     * @return {?}
     */
    function waitForAnimation(element, callback) {
        if (element === null) {
            return;
        }
        requestAnimationFrame(function () {
            /** @type {?} */
            var computedStyle = window.getComputedStyle(element);
            if (computedStyle.animationName !== 'none' &&
                computedStyle.animationPlayState === 'running') {
                return once(element, 'animationend', callback);
            }
            callback();
        });
    }
    /**
     * @param {?} element
     * @param {?} eventName
     * @param {?} listener
     * @return {?}
     */
    function once(element, eventName, listener) {
        element.addEventListener(eventName, function listenOnce(e) {
            element.removeEventListener(eventName, listenOnce);
            return listener(e);
        });
    }
    /** @type {?} */
    var closest = (( /** @type {?} */(window))).Element && Element.prototype.closest
        ? function (el, s) { return el.closest(s); }
        : function _closest(self, s) {
            /** @type {?} */
            var matches = ((( /** @type {?} */(self))).document || self.ownerDocument).querySelectorAll(s);
            /** @type {?} */
            var i;
            /** @type {?} */
            var el = self;
            do {
                i = matches.length;
                while (--i >= 0 && matches.item(i) !== el) { }
            } while (i < 0 && (el = el.parentElement));
            return el;
        };
    /**
     * @param {?} trigger
     * @param {?} dropdown
     * @param {?} __2
     * @return {?}
     */
    function calculatePosition(trigger, dropdown, _a) {
        var horizontalPosition = _a.horizontalPosition, verticalPosition = _a.verticalPosition, matchTriggerWidth = _a.matchTriggerWidth, previousHorizontalPosition = _a.previousHorizontalPosition, previousVerticalPosition = _a.previousVerticalPosition;
        // Collect information about all the involved DOM elements
        /** @type {?} */
        var scroll = { left: window.pageXOffset, top: window.pageYOffset };
        var _b = trigger.getBoundingClientRect(), triggerLeft = _b.left, triggerTop = _b.top, triggerWidth = _b.width, triggerHeight = _b.height;
        var _c = dropdown.getBoundingClientRect(), dropdownHeight = _c.height, dropdownWidth = _c.width;
        /** @type {?} */
        var viewportWidth = window.innerWidth;
        /** @type {?} */
        var style = {};
        // Calculate drop down width
        dropdownWidth = matchTriggerWidth ? triggerWidth : dropdownWidth;
        if (matchTriggerWidth) {
            style.width = dropdownWidth;
        }
        // Calculate horizontal position
        /** @type {?} */
        var triggerLeftWithScroll = triggerLeft + scroll.left;
        if (horizontalPosition === 'auto') {
            // Calculate the number of visible horizontal pixels if we were to place the
            // dropdown on the left and right
            /** @type {?} */
            var leftVisible = Math.min(viewportWidth, triggerLeft + dropdownWidth) -
                Math.max(0, triggerLeft);
            /** @type {?} */
            var rightVisible = Math.min(viewportWidth, triggerLeft + triggerWidth) -
                Math.max(0, triggerLeft + triggerWidth - dropdownWidth);
            if (dropdownWidth > leftVisible && rightVisible > leftVisible) {
                // If the drop down won't fit left-aligned, and there is more space on the
                // right than on the left, then force right-aligned
                horizontalPosition = 'right';
            }
            else if (dropdownWidth > rightVisible && leftVisible > rightVisible) {
                // If the drop down won't fit right-aligned, and there is more space on
                // the left than on the right, then force left-aligned
                horizontalPosition = 'left';
            }
            else {
                // Keep same position as previous
                horizontalPosition = previousHorizontalPosition || 'left';
            }
        }
        if (horizontalPosition === 'right') {
            style.right = viewportWidth - (triggerLeftWithScroll + triggerWidth);
        }
        else if (horizontalPosition === 'center') {
            style.left = triggerLeftWithScroll + (triggerWidth - dropdownWidth) / 2;
        }
        else {
            style.left = triggerLeftWithScroll;
        }
        // Calculate vertical position
        /** @type {?} */
        var triggerTopWithScroll = triggerTop + scroll.top;
        if (verticalPosition === 'above') {
            style.top = triggerTopWithScroll - dropdownHeight;
        }
        else if (verticalPosition === 'below') {
            style.top = triggerTopWithScroll + triggerHeight;
        }
        else {
            /** @type {?} */
            var viewportBottom = scroll.top + self.window.innerHeight;
            /** @type {?} */
            var enoughRoomBelow = triggerTopWithScroll + triggerHeight + dropdownHeight < viewportBottom;
            /** @type {?} */
            var enoughRoomAbove = triggerTop > dropdownHeight;
            if (previousVerticalPosition === 'below' &&
                !enoughRoomBelow &&
                enoughRoomAbove) {
                verticalPosition = 'above';
            }
            else if (previousVerticalPosition === 'above' &&
                !enoughRoomAbove &&
                enoughRoomBelow) {
                verticalPosition = 'below';
            }
            else if (!previousVerticalPosition) {
                verticalPosition = enoughRoomBelow ? 'below' : 'above';
            }
            else {
                verticalPosition = previousVerticalPosition;
            }
            style.top =
                triggerTopWithScroll +
                    (verticalPosition === 'below' ? triggerHeight : -dropdownHeight);
        }
        return { horizontalPosition: horizontalPosition, verticalPosition: verticalPosition, style: style };
    }
    /**
     * @param {?} trigger
     * @param {?} dropdown
     * @param {?} __2
     * @return {?}
     */
    function calculateInPlacePosition(trigger, dropdown, _a) {
        var horizontalPosition = _a.horizontalPosition, verticalPosition = _a.verticalPosition;
        /** @type {?} */
        var dropdownRect;
        /** @type {?} */
        var positionData = {};
        if (horizontalPosition === 'auto') {
            /** @type {?} */
            var triggerRect = trigger.getBoundingClientRect();
            dropdownRect = dropdown.getBoundingClientRect();
            /** @type {?} */
            var viewportRight = window.pageXOffset + window.innerWidth;
            positionData.horizontalPosition =
                triggerRect.left + dropdownRect.width > viewportRight ? 'right' : 'left';
        }
        if (verticalPosition === 'above') {
            positionData.verticalPosition = verticalPosition;
            dropdownRect = dropdownRect || dropdown.getBoundingClientRect();
            positionData.style = { top: -dropdownRect.height };
        }
        return positionData;
    }

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var _id = 1;
    /**
     * @return {?}
     */
    function generateDropdownId() {
        return _id++;
    }
    /** @type {?} */
    var EmptyDropdownContentPosition = Object.freeze({
        vPosition: null,
        hPosition: null,
        top: null,
        left: null,
        bottom: null,
        right: null
    });
    var AngularDropdownDirective = /** @class */ (function () {
        function AngularDropdownDirective(document, id) {
            var _this = this;
            this.renderInPlace = false;
            this.control = null;
            this.previousVerticalPosition = null;
            this.previousHorizontalPosition = null;
            this.matchTriggerWidth = false;
            this._isOpen$ = new rxjs.BehaviorSubject(false);
            this.isOpen$ = this._isOpen$.pipe(operators.skip(1));
            this.position$ = new rxjs.BehaviorSubject(EmptyDropdownContentPosition);
            this.calculatePosition = calculatePosition;
            this.calculateInPlacePosition = calculateInPlacePosition;
            this.disabled = false;
            this.beforeOpen = null;
            this.beforeClose = null;
            this.verticalPosition = 'auto';
            this.horizontalPosition = 'auto';
            this.onOpen = this.isOpen$.pipe(operators.filter(function (open) { return open === true; }));
            this.onClose = this.isOpen$.pipe(operators.filter(function (open) { return open === false; }));
            this.uniqueId = null;
            this.width = null;
            this.reposition = function () {
                if (!_this._isOpen$.getValue()) {
                    return null;
                }
                /** @type {?} */
                var dropdownElement = _this.dropdownElement;
                if (!dropdownElement || !_this.triggerElement) {
                    return null;
                }
                /** @type {?} */
                var _calculatePosition = _this.renderInPlace
                    ? _this.calculateInPlacePosition
                    : _this.calculatePosition;
                /** @type {?} */
                var options = {
                    horizontalPosition: _this.horizontalPosition,
                    verticalPosition: _this.verticalPosition,
                    matchTriggerWidth: _this.matchTriggerWidth,
                    previousHorizontalPosition: _this.previousHorizontalPosition,
                    previousVerticalPosition: _this.previousVerticalPosition
                };
                /** @type {?} */
                var positionData = _calculatePosition(_this.triggerElement, dropdownElement, options);
                return _this.applyReposition(_this.triggerElement, dropdownElement, positionData);
            };
            this.document = document;
            this.initializeId(id);
            this.createDefaultWormholeOutlet();
        }
        Object.defineProperty(AngularDropdownDirective.prototype, "dropdownId", {
            get: /**
             * @return {?}
             */ function () {
                return "ng-dropdown-content-" + this.uniqueId;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AngularDropdownDirective.prototype, "triggerElement", {
            get: /**
             * @return {?}
             */ function () {
                return this.control && this.control.element.nativeElement;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AngularDropdownDirective.prototype, "dropdownElement", {
            get: /**
             * @return {?}
             */ function () {
                return this.document.getElementById(this.dropdownId);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} __0
         * @return {?}
         */
        AngularDropdownDirective.prototype.ngOnChanges = /**
         * @param {?} __0
         * @return {?}
         */
            function (_a) {
                var disabled = _a.disabled;
                if (disabled &&
                    disabled.firstChange === false &&
                    disabled.currentValue === true &&
                    disabled.previousValue !== true) {
                    this.disable();
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.open = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.disabled || this._isOpen$.getValue()) {
                    return;
                }
                /** @type {?} */
                var open$ = rxjs.of(true);
                if (this.beforeOpen) {
                    /** @type {?} */
                    var result = this.beforeOpen();
                    open$ = result instanceof rxjs.Observable ? result : rxjs.of(result);
                }
                open$
                    .pipe(operators.first(), operators.filter(function (open) { return open === true; }))
                    .subscribe(function () { return _this._isOpen$.next(true); });
            };
        /**
         * @param {?=} skipFocus
         * @return {?}
         */
        AngularDropdownDirective.prototype.close = /**
         * @param {?=} skipFocus
         * @return {?}
         */
            function (skipFocus) {
                var _this = this;
                if (skipFocus === void 0) {
                    skipFocus = false;
                }
                if (this.disabled || !this._isOpen$.getValue()) {
                    return;
                }
                /** @type {?} */
                var close$ = rxjs.of(true);
                if (this.beforeClose) {
                    /** @type {?} */
                    var result = this.beforeClose();
                    close$ = result instanceof rxjs.Observable ? result : rxjs.of(result);
                }
                close$
                    .pipe(operators.first(), operators.filter(function (close) { return close === true; }))
                    .subscribe(function () {
                    Object.assign(_this, {
                        hPosition: null,
                        vPosition: null,
                        top: null,
                        right: null,
                        bottom: null,
                        left: null,
                        width: null,
                        previousVerticalPosition: null,
                        previousHorizontalPosition: null
                    });
                    _this._isOpen$.next(false);
                    if (!skipFocus) {
                        if (_this.triggerElement instanceof HTMLElement &&
                            _this.triggerElement.tabIndex > -1) {
                            _this.triggerElement.focus();
                        }
                    }
                });
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.toggle = /**
         * @return {?}
         */
            function () {
                if (this._isOpen$.getValue()) {
                    this.close();
                }
                else {
                    this.open();
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.disable = /**
         * @return {?}
         */
            function () {
                this.disabled = true;
                this.close();
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.enable = /**
         * @return {?}
         */
            function () {
                this.disabled = false;
            };
        /**
         * @param {?} trigger
         * @param {?} dropdown
         * @param {?} positions
         * @return {?}
         */
        AngularDropdownDirective.prototype.applyReposition = /**
         * @param {?} trigger
         * @param {?} dropdown
         * @param {?} positions
         * @return {?}
         */
            function (trigger, dropdown, positions) {
                /** @type {?} */
                var changes = {
                    hPosition: positions.horizontalPosition,
                    vPosition: positions.verticalPosition
                };
                if (positions.style) {
                    changes.top = positions.style.top + "px";
                    // The component can be aligned from the right or from the left, but not from both.
                    if (positions.style.left != null) {
                        changes.left = positions.style.left + "px";
                        changes.right = null;
                    }
                    else if (positions.style.right != null) {
                        changes.right = positions.style.right + "px";
                        changes.left = null;
                    }
                    if (positions.style.width != null) {
                        changes.width = positions.style.width + "px";
                    }
                    if (this.position$.getValue().top == null) {
                        // Bypass on the first reposition only to avoid flickering.
                        Object.keys(positions.style).forEach(function (k) { return (dropdown.style[( /** @type {?} */(k))] = positions.style[k]); });
                    }
                }
                this.position$.next(changes);
                this.previousHorizontalPosition = positions.horizontalPosition;
                this.previousVerticalPosition = positions.verticalPosition;
                return changes;
            };
        /**
         * @param {?=} id
         * @return {?}
         */
        AngularDropdownDirective.prototype.initializeId = /**
         * @param {?=} id
         * @return {?}
         */
            function (id) {
                if (id) {
                    this.id = this.uniqueId = id;
                }
                else {
                    this.uniqueId = generateDropdownId();
                    this.id = "ng-dropdown-" + this.uniqueId;
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownDirective.prototype.createDefaultWormholeOutlet = /**
         * @return {?}
         */
            function () {
                if (!this.document.getElementById('ng-dropdown-outlet')) {
                    /** @type {?} */
                    var outlet = this.document.createElement('div');
                    outlet.id = 'ng-dropdown-outlet';
                    this.document.body.insertBefore(outlet, this.document.body.firstChild);
                }
            };
        AngularDropdownDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: 'ng-dropdown,[ngDropdown],[ng-dropdown]',
                        host: {
                            '[class.render-in-place]': 'renderInPlace',
                            '[class.ng-dropdown]': 'true'
                        }
                    },] }
        ];
        AngularDropdownDirective.ctorParameters = function () {
            return [
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] },
                { type: String, decorators: [{ type: core.Attribute, args: ['id',] }] }
            ];
        };
        AngularDropdownDirective.propDecorators = {
            renderInPlace: [{ type: core.Input }],
            control: [{ type: core.ContentChild, args: [AngularDropdownControlDirective,] }],
            calculatePosition: [{ type: core.Input }],
            calculateInPlacePosition: [{ type: core.Input }],
            disabled: [{ type: core.Input }],
            beforeOpen: [{ type: core.Input }],
            beforeClose: [{ type: core.Input }],
            verticalPosition: [{ type: core.Input }],
            horizontalPosition: [{ type: core.Input }],
            onOpen: [{ type: core.Output, args: ['open',] }],
            onClose: [{ type: core.Output, args: ['close',] }],
            dropdownContent: [{ type: core.ContentChild, args: [core.forwardRef(function () { return AngularDropdownContentComponent; }),] }]
        };
        return AngularDropdownDirective;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    /** @type {?} */
    var MutationObserver = (( /** @type {?} */(window))).MutationObserver;
    var AngularDropdownContentComponent = /** @class */ (function () {
        function AngularDropdownContentComponent(dropdown, zone, document) {
            var _this = this;
            this.dropdown = dropdown;
            this.zone = zone;
            this.dropdownClass = '';
            this.overlay = false;
            this.hasMoved = false;
            this._animationClass = null;
            this.isTouchDevice = 'ontouchstart' in window;
            this.mutationObserver = null;
            this.destroy$ = new rxjs.Subject();
            this.transitioningInClass = 'ng-dropdown-content--transitioning-in';
            this.transitionedInClass = 'ng-dropdown-content--transitioned-in';
            this.transitioningOutClass = 'ng-dropdown-content--transitioning-out';
            this.shouldOpen = false;
            this.repositionInZone = function () {
                return _this.zone.run(function () { return _this.dropdown.reposition(); });
            };
            this.handleRootMouseDown = function (e) {
                var target = ( /** @type {?} */(e)).target;
                if (_this.hasMoved ||
                    (_this.dropdownElement !== null &&
                        _this.dropdownElement.contains(target)) ||
                    (_this.triggerElement !== null && _this.triggerElement.contains(target))) {
                    _this.hasMoved = false;
                    return;
                }
                /** @type {?} */
                var closestDropdown = closest(target, 'ng-dropdown-content');
                if (closestDropdown !== null) {
                    /** @type {?} */
                    var trigger = _this.document.querySelector("[aria-controls=" + closestDropdown.getAttribute('id') + "]");
                    /** @type {?} */
                    var parentDropdown = closest(( /** @type {?} */(trigger)), 'ng-dropdown-content');
                    if (parentDropdown !== null &&
                        parentDropdown.getAttribute('id') === _this.dropdown.dropdownId) {
                        _this.hasMoved = false;
                        return;
                    }
                }
                _this.dropdown.close(true);
            };
            this.touchStartHandler = function (e) {
                _this.document.body.addEventListener('touchmove', _this.touchMoveHandler, true);
            };
            this.touchMoveHandler = function (e) {
                _this.hasMoved = true;
                _this.document.body.removeEventListener('touchmove', _this.touchMoveHandler, true);
            };
            this.document = document;
        }
        Object.defineProperty(AngularDropdownContentComponent.prototype, "dropdownElement", {
            get: /**
             * @return {?}
             */ function () {
                return this.dropdown.dropdownElement;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.dropdown.onOpen
                    .pipe(operators.takeUntil(this.destroy$))
                    .subscribe(function () { return (_this.shouldOpen = true); });
                this.dropdown.onClose
                    .pipe(operators.takeUntil(this.destroy$))
                    .subscribe(function () { return _this.close(); });
            };
        Object.defineProperty(AngularDropdownContentComponent.prototype, "animationClass", {
            get: /**
             * @return {?}
             */ function () {
                return this._animationClass;
            },
            set: /**
             * @param {?} className
             * @return {?}
             */ function (className) {
                if (this.dropdownElement !== null) {
                    if (this._animationClass && className !== this._animationClass) {
                        this.dropdownElement.classList.remove(this._animationClass);
                    }
                    else if (className) {
                        this.dropdownElement.classList.add(className);
                    }
                }
                this._animationClass = className;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(AngularDropdownContentComponent.prototype, "triggerElement", {
            get: /**
             * @return {?}
             */ function () {
                return this.dropdown.triggerElement;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.ngAfterViewChecked = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (this.shouldOpen) {
                    this.animationClass = this.transitioningInClass;
                    requestAnimationFrame(function () { return _this.open(); });
                    this.shouldOpen = false;
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.destroy$.next();
                this.teardownEvents();
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.open = /**
         * @return {?}
         */
            function () {
                var _this = this;
                this.document.body.addEventListener('mousedown', this.handleRootMouseDown, true);
                if (this.isTouchDevice) {
                    this.document.body.addEventListener('touchstart', this.touchStartHandler, true);
                    this.document.body.addEventListener('touchend', this.handleRootMouseDown, true);
                }
                /** @type {?} */
                var changes = this.dropdown.reposition();
                if (!this.dropdown.renderInPlace) {
                    this.addGlobalEvents();
                    this.startObservingDomMutations();
                }
                else if (changes !== null && changes.vPosition === 'above') {
                    this.startObservingDomMutations();
                }
                requestAnimationFrame(function () { return _this.animateIn(); });
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.close = /**
         * @return {?}
         */
            function () {
                this.teardownEvents();
                this.animateOut();
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.animateIn = /**
         * @return {?}
         */
            function () {
                var _this = this;
                waitForAnimation(this.dropdownElement, function () {
                    _this.animationClass = _this.transitionedInClass;
                });
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.animateOut = /**
         * @return {?}
         */
            function () {
                if (this.dropdownElement === null) {
                    return;
                }
                /** @type {?} */
                var parentElement = this.dropdown.renderInPlace
                    ? ( /** @type {?} */(( /** @type {?} */(this.dropdownElement.parentElement)).parentElement))
                    : ( /** @type {?} */(this.dropdownElement.parentElement));
                /** @type {?} */
                var clone = ( /** @type {?} */(this.dropdownElement.cloneNode(true)));
                clone.id = this.dropdownElement.id + "--clone";
                clone.classList.remove(this.transitionedInClass);
                clone.classList.remove(this.transitioningInClass);
                clone.classList.add(this.transitioningOutClass);
                parentElement.appendChild(clone);
                this.animationClass = this.transitioningInClass;
                waitForAnimation(clone, function () { return parentElement.removeChild(clone); });
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.startObservingDomMutations = /**
         * @return {?}
         */
            function () {
                var _this = this;
                if (MutationObserver !== undefined) {
                    this.mutationObserver = new MutationObserver(function (mutations) {
                        if (mutations[0].addedNodes.length ||
                            mutations[0].removedNodes.length) {
                            _this.repositionInZone();
                        }
                    });
                    ( /** @type {?} */(this.mutationObserver)).observe(( /** @type {?} */(this.dropdownElement)), {
                        childList: true,
                        subtree: true
                    });
                }
                else {
                    ( /** @type {?} */(this.dropdownElement)).addEventListener('DOMNodeInserted', this.repositionInZone, false);
                    ( /** @type {?} */(this.dropdownElement)).addEventListener('DOMNodeRemoved', this.repositionInZone, false);
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.stopObservingDomMutations = /**
         * @return {?}
         */
            function () {
                if (MutationObserver) {
                    if (this.mutationObserver) {
                        this.mutationObserver.disconnect();
                        this.mutationObserver = null;
                    }
                }
                else {
                    if (this.dropdownElement !== null) {
                        this.dropdownElement.removeEventListener('DOMNodeInserted', this.repositionInZone);
                        this.dropdownElement.removeEventListener('DOMNodeRemoved', this.repositionInZone);
                    }
                }
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.addGlobalEvents = /**
         * @return {?}
         */
            function () {
                window.addEventListener('scroll', this.repositionInZone);
                window.addEventListener('resize', this.repositionInZone);
                window.addEventListener('orientationchange', this.repositionInZone);
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.removeGlobalEvents = /**
         * @return {?}
         */
            function () {
                window.removeEventListener('scroll', this.repositionInZone);
                window.removeEventListener('resize', this.repositionInZone);
                window.removeEventListener('orientationchange', this.repositionInZone);
            };
        /**
         * @return {?}
         */
        AngularDropdownContentComponent.prototype.teardownEvents = /**
         * @return {?}
         */
            function () {
                this.removeGlobalEvents();
                this.stopObservingDomMutations();
                this.document.body.removeEventListener('mousedown', this.handleRootMouseDown, true);
                if (this.isTouchDevice) {
                    this.document.body.removeEventListener('touchstart', this.touchStartHandler, true);
                    this.document.body.removeEventListener('touchend', this.handleRootMouseDown, true);
                }
            };
        AngularDropdownContentComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'ng-dropdown-content,[ng-dropdown-content],[ngDropdownContent]',
                        template: "<ng-container *ngIf=\"dropdown.isOpen$ | async as isOpen\">\n  <ng-container *ngWormhole=\"'#ng-dropdown-outlet'; renderInPlace: dropdown.renderInPlace\">\n    <div *ngIf=\"overlay && isOpen\" class=\"ng-dropdown-overlay\"></div>\n    <div [id]=\"dropdown.dropdownId\"\n        class=\"ng-dropdown-content {{dropdownClass}}\"\n        [style.top]=\"(dropdown.position$ | async)?.top\"\n        [style.right]=\"(dropdown.position$ | async)?.right\"\n        [style.bottom]=\"(dropdown.position$ | async)?.bottom\"\n        [style.left]=\"(dropdown.position$ | async)?.left\"\n        [class.render-in-place]=\"dropdown.renderInPlace\"\n        [class.ng-dropdown-content--above]=\"(dropdown.position$ | async)?.vPosition === 'above'\"\n        [class.ng-dropdown-content--below]=\"(dropdown.position$ | async)?.vPosition === 'below'\"\n        [class.ng-dropdown-content--right]=\"(dropdown.position$ | async)?.hPosition === 'right'\"\n        [class.ng-dropdown-content--center]=\"(dropdown.position$ | async)?.hPosition === 'center'\"\n        [class.ng-dropdown-content--left]=\"(dropdown.position$ | async)?.hPosition === 'left'\">\n      <ng-content></ng-content>\n    </div>\n  </ng-container>\n  <div *ngIf=\"!isOpen\" [id]=\"dropdown.dropdownId\" class=\"ng-dropdown-placeholder\"></div>\n</ng-container>\n",
                        host: {
                            '[class.render-in-place]': 'dropdown.renderInPlace'
                        },
                        styles: [":host{display:none}:host.render-in-place{display:block;position:absolute}"]
                    }] }
        ];
        AngularDropdownContentComponent.ctorParameters = function () {
            return [
                { type: AngularDropdownDirective, decorators: [{ type: core.Host }, { type: core.Inject, args: [core.forwardRef(function () { return AngularDropdownDirective; }),] }] },
                { type: core.NgZone },
                { type: undefined, decorators: [{ type: core.Inject, args: [common.DOCUMENT,] }] }
            ];
        };
        AngularDropdownContentComponent.propDecorators = {
            dropdownClass: [{ type: core.Input }],
            overlay: [{ type: core.Input }],
            transitioningInClass: [{ type: core.Input }],
            transitionedInClass: [{ type: core.Input }],
            transitioningOutClass: [{ type: core.Input }]
        };
        return AngularDropdownContentComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */
    var AngularDropdownModule = /** @class */ (function () {
        function AngularDropdownModule() {
        }
        AngularDropdownModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [common.CommonModule, ngWormhole.NgWormholeModule],
                        declarations: [
                            AngularDropdownDirective,
                            AngularDropdownControlDirective,
                            AngularDropdownContentComponent
                        ],
                        exports: [
                            AngularDropdownDirective,
                            AngularDropdownControlDirective,
                            AngularDropdownContentComponent
                        ]
                    },] }
        ];
        return AngularDropdownModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
     */

    exports.AngularDropdownContentComponent = AngularDropdownContentComponent;
    exports.AngularDropdownControlDirective = AngularDropdownControlDirective;
    exports.AngularDropdownDirective = AngularDropdownDirective;
    exports.AngularDropdownModule = AngularDropdownModule;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1kcm9wZG93bi51bWQuanMubWFwIiwic291cmNlcyI6WyJuZzovL2FuZ3VsYXItZHJvcGRvd24vbGliL2FuZ3VsYXItZHJvcGRvd24tY29udHJvbC5kaXJlY3RpdmUudHMiLCJuZzovL2FuZ3VsYXItZHJvcGRvd24vbGliL3V0aWxzLnRzIiwibmc6Ly9hbmd1bGFyLWRyb3Bkb3duL2xpYi9hbmd1bGFyLWRyb3Bkb3duLmRpcmVjdGl2ZS50cyIsIm5nOi8vYW5ndWxhci1kcm9wZG93bi9saWIvYW5ndWxhci1kcm9wZG93bi1jb250ZW50LmNvbXBvbmVudC50cyIsIm5nOi8vYW5ndWxhci1kcm9wZG93bi9saWIvYW5ndWxhci1kcm9wZG93bi5tb2R1bGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgRGlyZWN0aXZlLFxuICBFbGVtZW50UmVmLFxuICBJbmplY3QsXG4gIGZvcndhcmRSZWYsXG4gIElucHV0LFxuICBIb3N0LFxuICBIb3N0TGlzdGVuZXJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSB9XG4gIGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi5kaXJlY3RpdmUnO1xuXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbbmctZHJvcGRvd24tY29udHJvbF0sW25nRHJvcGRvd25Db250cm9sXScsXG4gIGhvc3Q6IHtcbiAgICAnW2F0dHIuYXJpYS1oYXNwb3B1cF0nOiAndHJ1ZScsXG4gICAgJ1thdHRyLmFyaWEtY29udHJvbHNdJzogJ2Ryb3Bkb3duLmlkJyxcbiAgICAnW2F0dHIuYXJpYS1leHBhbmRlZF0nOiAnZHJvcGRvd24uaXNPcGVuJyxcbiAgICAnW2NsYXNzLm5nLWRyb3Bkb3duLWNvbnRyb2xdJzogJ3RydWUnLFxuICAgICdbY2xhc3MuYWN0aXZlXSc6ICdkcm9wZG93bi5pc09wZW4nXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSB7XG4gIEBIb3N0TGlzdGVuZXIoJ2NsaWNrJywgWyAnJGV2ZW50JyBdKVxuICBvbkNsaWNrKGU6IEV2ZW50KTogdm9pZCB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgIGlmICghdGhpcy5kcm9wZG93bi5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5kcm9wZG93bi50b2dnbGUoKTtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIEBIb3N0KClcbiAgICAgIEBJbmplY3QoZm9yd2FyZFJlZigoKSA9PiBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUpKVxuICAgICAgcHVibGljIGRyb3Bkb3duOiBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUsXG4gICAgICBwdWJsaWMgZWxlbWVudDogRWxlbWVudFJlZikge1xuICB9XG59XG4iLCJleHBvcnQgZnVuY3Rpb24gd2FpdEZvckFuaW1hdGlvbihcbiAgZWxlbWVudDogRWxlbWVudCB8IG51bGwsXG4gIGNhbGxiYWNrOiAoZT86IEV2ZW50KSA9PiBhbnlcbik6IHZvaWQge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgY29uc3QgY29tcHV0ZWRTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpO1xuXG4gICAgaWYgKFxuICAgICAgY29tcHV0ZWRTdHlsZS5hbmltYXRpb25OYW1lICE9PSAnbm9uZScgJiZcbiAgICAgIGNvbXB1dGVkU3R5bGUuYW5pbWF0aW9uUGxheVN0YXRlID09PSAncnVubmluZydcbiAgICApIHtcbiAgICAgIHJldHVybiBvbmNlKGVsZW1lbnQsICdhbmltYXRpb25lbmQnLCBjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgY2FsbGJhY2soKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG9uY2UoXG4gIGVsZW1lbnQ6IE5vZGUsXG4gIGV2ZW50TmFtZTogc3RyaW5nLFxuICBsaXN0ZW5lcjogKGU6IEV2ZW50KSA9PiBhbnlcbik6IHZvaWQge1xuICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jdGlvbiBsaXN0ZW5PbmNlKGUpIHtcbiAgICBlbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5PbmNlKTtcblxuICAgIHJldHVybiBsaXN0ZW5lcihlKTtcbiAgfSk7XG59XG5cbmV4cG9ydCBjb25zdCBjbG9zZXN0OiAoZWxlbWVudDogRWxlbWVudCwgc2VsZWN0b3I6IHN0cmluZykgPT4gRWxlbWVudCB8IG51bGwgPVxuICAod2luZG93IGFzIGFueSkuRWxlbWVudCAmJiBFbGVtZW50LnByb3RvdHlwZS5jbG9zZXN0XG4gICAgPyAoZWwsIHMpID0+IGVsLmNsb3Nlc3QocylcbiAgICA6IGZ1bmN0aW9uIF9jbG9zZXN0KHNlbGY6IEVsZW1lbnQsIHM6IHN0cmluZykge1xuICAgICAgICBjb25zdCBtYXRjaGVzID0gKFxuICAgICAgICAgIChzZWxmIGFzIGFueSkuZG9jdW1lbnQgfHwgc2VsZi5vd25lckRvY3VtZW50XG4gICAgICAgICkucXVlcnlTZWxlY3RvckFsbChzKTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBlbDogRWxlbWVudCB8IG51bGwgPSBzZWxmO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgaSA9IG1hdGNoZXMubGVuZ3RoO1xuICAgICAgICAgIHdoaWxlICgtLWkgPj0gMCAmJiBtYXRjaGVzLml0ZW0oaSkgIT09IGVsKSB7fVxuICAgICAgICB9IHdoaWxlIChpIDwgMCAmJiAoZWwgPSBlbC5wYXJlbnRFbGVtZW50KSk7XG4gICAgICAgIHJldHVybiBlbDtcbiAgICAgIH07XG5cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVQb3NpdGlvbihcbiAgdHJpZ2dlcjogRWxlbWVudCxcbiAgZHJvcGRvd246IEVsZW1lbnQsXG4gIHtcbiAgICBob3Jpem9udGFsUG9zaXRpb24sXG4gICAgdmVydGljYWxQb3NpdGlvbixcbiAgICBtYXRjaFRyaWdnZXJXaWR0aCxcbiAgICBwcmV2aW91c0hvcml6b250YWxQb3NpdGlvbixcbiAgICBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb25cbiAgfTogYW55XG4pOiBhbnkge1xuICAvLyBDb2xsZWN0IGluZm9ybWF0aW9uIGFib3V0IGFsbCB0aGUgaW52b2x2ZWQgRE9NIGVsZW1lbnRzXG4gIGNvbnN0IHNjcm9sbCA9IHsgbGVmdDogd2luZG93LnBhZ2VYT2Zmc2V0LCB0b3A6IHdpbmRvdy5wYWdlWU9mZnNldCB9O1xuICBjb25zdCB7XG4gICAgbGVmdDogdHJpZ2dlckxlZnQsXG4gICAgdG9wOiB0cmlnZ2VyVG9wLFxuICAgIHdpZHRoOiB0cmlnZ2VyV2lkdGgsXG4gICAgaGVpZ2h0OiB0cmlnZ2VySGVpZ2h0XG4gIH0gPSB0cmlnZ2VyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBsZXQge1xuICAgIGhlaWdodDogZHJvcGRvd25IZWlnaHQsXG4gICAgd2lkdGg6IGRyb3Bkb3duV2lkdGhcbiAgfSA9IGRyb3Bkb3duLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCB2aWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gIGNvbnN0IHN0eWxlOiBhbnkgPSB7fTtcblxuICAvLyBDYWxjdWxhdGUgZHJvcCBkb3duIHdpZHRoXG4gIGRyb3Bkb3duV2lkdGggPSBtYXRjaFRyaWdnZXJXaWR0aCA/IHRyaWdnZXJXaWR0aCA6IGRyb3Bkb3duV2lkdGg7XG4gIGlmIChtYXRjaFRyaWdnZXJXaWR0aCkge1xuICAgIHN0eWxlLndpZHRoID0gZHJvcGRvd25XaWR0aDtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBob3Jpem9udGFsIHBvc2l0aW9uXG4gIGNvbnN0IHRyaWdnZXJMZWZ0V2l0aFNjcm9sbCA9IHRyaWdnZXJMZWZ0ICsgc2Nyb2xsLmxlZnQ7XG4gIGlmIChob3Jpem9udGFsUG9zaXRpb24gPT09ICdhdXRvJykge1xuICAgIC8vIENhbGN1bGF0ZSB0aGUgbnVtYmVyIG9mIHZpc2libGUgaG9yaXpvbnRhbCBwaXhlbHMgaWYgd2Ugd2VyZSB0byBwbGFjZSB0aGVcbiAgICAvLyBkcm9wZG93biBvbiB0aGUgbGVmdCBhbmQgcmlnaHRcbiAgICBjb25zdCBsZWZ0VmlzaWJsZSA9XG4gICAgICBNYXRoLm1pbih2aWV3cG9ydFdpZHRoLCB0cmlnZ2VyTGVmdCArIGRyb3Bkb3duV2lkdGgpIC1cbiAgICAgIE1hdGgubWF4KDAsIHRyaWdnZXJMZWZ0KTtcbiAgICBjb25zdCByaWdodFZpc2libGUgPVxuICAgICAgTWF0aC5taW4odmlld3BvcnRXaWR0aCwgdHJpZ2dlckxlZnQgKyB0cmlnZ2VyV2lkdGgpIC1cbiAgICAgIE1hdGgubWF4KDAsIHRyaWdnZXJMZWZ0ICsgdHJpZ2dlcldpZHRoIC0gZHJvcGRvd25XaWR0aCk7XG5cbiAgICBpZiAoZHJvcGRvd25XaWR0aCA+IGxlZnRWaXNpYmxlICYmIHJpZ2h0VmlzaWJsZSA+IGxlZnRWaXNpYmxlKSB7XG4gICAgICAvLyBJZiB0aGUgZHJvcCBkb3duIHdvbid0IGZpdCBsZWZ0LWFsaWduZWQsIGFuZCB0aGVyZSBpcyBtb3JlIHNwYWNlIG9uIHRoZVxuICAgICAgLy8gcmlnaHQgdGhhbiBvbiB0aGUgbGVmdCwgdGhlbiBmb3JjZSByaWdodC1hbGlnbmVkXG4gICAgICBob3Jpem9udGFsUG9zaXRpb24gPSAncmlnaHQnO1xuICAgIH0gZWxzZSBpZiAoZHJvcGRvd25XaWR0aCA+IHJpZ2h0VmlzaWJsZSAmJiBsZWZ0VmlzaWJsZSA+IHJpZ2h0VmlzaWJsZSkge1xuICAgICAgLy8gSWYgdGhlIGRyb3AgZG93biB3b24ndCBmaXQgcmlnaHQtYWxpZ25lZCwgYW5kIHRoZXJlIGlzIG1vcmUgc3BhY2Ugb25cbiAgICAgIC8vIHRoZSBsZWZ0IHRoYW4gb24gdGhlIHJpZ2h0LCB0aGVuIGZvcmNlIGxlZnQtYWxpZ25lZFxuICAgICAgaG9yaXpvbnRhbFBvc2l0aW9uID0gJ2xlZnQnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBLZWVwIHNhbWUgcG9zaXRpb24gYXMgcHJldmlvdXNcbiAgICAgIGhvcml6b250YWxQb3NpdGlvbiA9IHByZXZpb3VzSG9yaXpvbnRhbFBvc2l0aW9uIHx8ICdsZWZ0JztcbiAgICB9XG4gIH1cbiAgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgIHN0eWxlLnJpZ2h0ID0gdmlld3BvcnRXaWR0aCAtICh0cmlnZ2VyTGVmdFdpdGhTY3JvbGwgKyB0cmlnZ2VyV2lkdGgpO1xuICB9IGVsc2UgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ2NlbnRlcicpIHtcbiAgICBzdHlsZS5sZWZ0ID0gdHJpZ2dlckxlZnRXaXRoU2Nyb2xsICsgKHRyaWdnZXJXaWR0aCAtIGRyb3Bkb3duV2lkdGgpIC8gMjtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZS5sZWZ0ID0gdHJpZ2dlckxlZnRXaXRoU2Nyb2xsO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIHZlcnRpY2FsIHBvc2l0aW9uXG4gIGNvbnN0IHRyaWdnZXJUb3BXaXRoU2Nyb2xsID0gdHJpZ2dlclRvcCArIHNjcm9sbC50b3A7XG4gIGlmICh2ZXJ0aWNhbFBvc2l0aW9uID09PSAnYWJvdmUnKSB7XG4gICAgc3R5bGUudG9wID0gdHJpZ2dlclRvcFdpdGhTY3JvbGwgLSBkcm9wZG93bkhlaWdodDtcbiAgfSBlbHNlIGlmICh2ZXJ0aWNhbFBvc2l0aW9uID09PSAnYmVsb3cnKSB7XG4gICAgc3R5bGUudG9wID0gdHJpZ2dlclRvcFdpdGhTY3JvbGwgKyB0cmlnZ2VySGVpZ2h0O1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHZpZXdwb3J0Qm90dG9tID0gc2Nyb2xsLnRvcCArIHNlbGYud2luZG93LmlubmVySGVpZ2h0O1xuICAgIGNvbnN0IGVub3VnaFJvb21CZWxvdyA9XG4gICAgICB0cmlnZ2VyVG9wV2l0aFNjcm9sbCArIHRyaWdnZXJIZWlnaHQgKyBkcm9wZG93bkhlaWdodCA8IHZpZXdwb3J0Qm90dG9tO1xuICAgIGNvbnN0IGVub3VnaFJvb21BYm92ZSA9IHRyaWdnZXJUb3AgPiBkcm9wZG93bkhlaWdodDtcblxuICAgIGlmIChcbiAgICAgIHByZXZpb3VzVmVydGljYWxQb3NpdGlvbiA9PT0gJ2JlbG93JyAmJlxuICAgICAgIWVub3VnaFJvb21CZWxvdyAmJlxuICAgICAgZW5vdWdoUm9vbUFib3ZlXG4gICAgKSB7XG4gICAgICB2ZXJ0aWNhbFBvc2l0aW9uID0gJ2Fib3ZlJztcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgcHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uID09PSAnYWJvdmUnICYmXG4gICAgICAhZW5vdWdoUm9vbUFib3ZlICYmXG4gICAgICBlbm91Z2hSb29tQmVsb3dcbiAgICApIHtcbiAgICAgIHZlcnRpY2FsUG9zaXRpb24gPSAnYmVsb3cnO1xuICAgIH0gZWxzZSBpZiAoIXByZXZpb3VzVmVydGljYWxQb3NpdGlvbikge1xuICAgICAgdmVydGljYWxQb3NpdGlvbiA9IGVub3VnaFJvb21CZWxvdyA/ICdiZWxvdycgOiAnYWJvdmUnO1xuICAgIH0gZWxzZSB7XG4gICAgICB2ZXJ0aWNhbFBvc2l0aW9uID0gcHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uO1xuICAgIH1cbiAgICBzdHlsZS50b3AgPVxuICAgICAgdHJpZ2dlclRvcFdpdGhTY3JvbGwgK1xuICAgICAgKHZlcnRpY2FsUG9zaXRpb24gPT09ICdiZWxvdycgPyB0cmlnZ2VySGVpZ2h0IDogLWRyb3Bkb3duSGVpZ2h0KTtcbiAgfVxuXG4gIHJldHVybiB7IGhvcml6b250YWxQb3NpdGlvbiwgdmVydGljYWxQb3NpdGlvbiwgc3R5bGUgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUluUGxhY2VQb3NpdGlvbihcbiAgdHJpZ2dlcjogRWxlbWVudCxcbiAgZHJvcGRvd246IEVsZW1lbnQsXG4gIHsgaG9yaXpvbnRhbFBvc2l0aW9uLCB2ZXJ0aWNhbFBvc2l0aW9uIH06IGFueVxuKSB7XG4gIGxldCBkcm9wZG93blJlY3Q7XG4gIGNvbnN0IHBvc2l0aW9uRGF0YTogYW55ID0ge307XG5cbiAgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ2F1dG8nKSB7XG4gICAgY29uc3QgdHJpZ2dlclJlY3QgPSB0cmlnZ2VyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGRyb3Bkb3duUmVjdCA9IGRyb3Bkb3duLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIGNvbnN0IHZpZXdwb3J0UmlnaHQgPSB3aW5kb3cucGFnZVhPZmZzZXQgKyB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICBwb3NpdGlvbkRhdGEuaG9yaXpvbnRhbFBvc2l0aW9uID1cbiAgICAgIHRyaWdnZXJSZWN0LmxlZnQgKyBkcm9wZG93blJlY3Qud2lkdGggPiB2aWV3cG9ydFJpZ2h0ID8gJ3JpZ2h0JyA6ICdsZWZ0JztcbiAgfVxuICBpZiAodmVydGljYWxQb3NpdGlvbiA9PT0gJ2Fib3ZlJykge1xuICAgIHBvc2l0aW9uRGF0YS52ZXJ0aWNhbFBvc2l0aW9uID0gdmVydGljYWxQb3NpdGlvbjtcbiAgICBkcm9wZG93blJlY3QgPSBkcm9wZG93blJlY3QgfHwgZHJvcGRvd24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcG9zaXRpb25EYXRhLnN0eWxlID0geyB0b3A6IC1kcm9wZG93blJlY3QuaGVpZ2h0IH07XG4gIH1cbiAgcmV0dXJuIHBvc2l0aW9uRGF0YTtcbn1cbiIsImltcG9ydCB7IE9ic2VydmFibGUsIEJlaGF2aW9yU3ViamVjdCwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHNraXAsIGZpcnN0LCBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgRGlyZWN0aXZlLFxuICBBdHRyaWJ1dGUsXG4gIEluamVjdCxcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgRWxlbWVudFJlZixcbiAgQWZ0ZXJWaWV3SW5pdCxcbiAgT25DaGFuZ2VzLFxuICBDb250ZW50Q2hpbGQsXG4gIFNpbXBsZUNoYW5nZXMsXG4gIEV2ZW50RW1pdHRlcixcbiAgUXVlcnlMaXN0LFxuICBWaWV3Q29udGFpbmVyUmVmLFxuICBmb3J3YXJkUmVmXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUgfSBmcm9tICcuL2FuZ3VsYXItZHJvcGRvd24tY29udHJvbC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duQ29udGVudENvbXBvbmVudCB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi1jb250ZW50LmNvbXBvbmVudCc7XG5cbmltcG9ydCB7IGNhbGN1bGF0ZVBvc2l0aW9uLCBjYWxjdWxhdGVJblBsYWNlUG9zaXRpb24gfSBmcm9tICcuL3V0aWxzJztcblxuZXhwb3J0IGludGVyZmFjZSBBbmd1bGFyRHJvcGRvd25Qb3NpdGlvbkNoYW5nZXMge1xuICB2UG9zaXRpb246ICdhYm92ZScgfCAnYmVsb3cnO1xuICBoUG9zaXRpb246ICdyaWdodCcgfCAnY2VudGVyJyB8ICdsZWZ0Jztcbn1cblxubGV0IF9pZCA9IDE7XG5mdW5jdGlvbiBnZW5lcmF0ZURyb3Bkb3duSWQoKSB7XG4gIHJldHVybiBfaWQrKztcbn1cblxuZXhwb3J0IHR5cGUgVmVydGljYWxQb3NpdGlvbiA9ICdhdXRvJyB8ICdhYm92ZScgfCAnYmVsb3cnO1xuZXhwb3J0IHR5cGUgSG9yaXpvbnRhbFBvc2l0aW9uID0gJ2F1dG8nIHwgJ3JpZ2h0JyB8ICdjZW50ZXInIHwgJ2xlZnQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERyb3Bkb3duQ29udGVudFBvc2l0aW9uIHtcbiAgcmVhZG9ubHkgaFBvc2l0aW9uOiBIb3Jpem9udGFsUG9zaXRpb24gfCBudWxsO1xuICByZWFkb25seSB2UG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gfCBudWxsO1xuICByZWFkb25seSB0b3A6IHN0cmluZyB8IG51bGw7XG4gIHJlYWRvbmx5IGxlZnQ6IHN0cmluZyB8IG51bGw7XG4gIHJlYWRvbmx5IGJvdHRvbTogc3RyaW5nIHwgbnVsbDtcbiAgcmVhZG9ubHkgcmlnaHQ6IHN0cmluZyB8IG51bGw7XG59XG5cbmNvbnN0IEVtcHR5RHJvcGRvd25Db250ZW50UG9zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcbiAgdlBvc2l0aW9uOiBudWxsLFxuICBoUG9zaXRpb246IG51bGwsXG4gIHRvcDogbnVsbCxcbiAgbGVmdDogbnVsbCxcbiAgYm90dG9tOiBudWxsLFxuICByaWdodDogbnVsbFxufSk7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ25nLWRyb3Bkb3duLFtuZ0Ryb3Bkb3duXSxbbmctZHJvcGRvd25dJyxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MucmVuZGVyLWluLXBsYWNlXSc6ICdyZW5kZXJJblBsYWNlJyxcbiAgICAnW2NsYXNzLm5nLWRyb3Bkb3duXSc6ICd0cnVlJ1xuICB9XG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG4gIGlkPzogc3RyaW5nO1xuXG4gIEBJbnB1dCgpXG4gIHJlbmRlckluUGxhY2UgPSBmYWxzZTtcblxuICBAQ29udGVudENoaWxkKEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUpXG4gIGNvbnRyb2w6IEFuZ3VsYXJEcm9wZG93bkNvbnRyb2xEaXJlY3RpdmUgfCBudWxsID0gbnVsbDtcblxuICBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gfCBudWxsID0gbnVsbDtcbiAgcHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb246IEhvcml6b250YWxQb3NpdGlvbiB8IG51bGwgPSBudWxsO1xuICBtYXRjaFRyaWdnZXJXaWR0aCA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2lzT3BlbiQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgaXNPcGVuJCA9IHRoaXMuX2lzT3BlbiQucGlwZShza2lwKDEpKTtcblxuICBwb3NpdGlvbiQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0PFJlYWRvbmx5PERyb3Bkb3duQ29udGVudFBvc2l0aW9uPj4oXG4gICAgRW1wdHlEcm9wZG93bkNvbnRlbnRQb3NpdGlvblxuICApO1xuXG4gIGdldCBkcm9wZG93bklkKCkge1xuICAgIHJldHVybiBgbmctZHJvcGRvd24tY29udGVudC0ke3RoaXMudW5pcXVlSWR9YDtcbiAgfVxuXG4gIEBJbnB1dCgpXG4gIGNhbGN1bGF0ZVBvc2l0aW9uOiBGdW5jdGlvbiA9IGNhbGN1bGF0ZVBvc2l0aW9uO1xuICBASW5wdXQoKVxuICBjYWxjdWxhdGVJblBsYWNlUG9zaXRpb246IEZ1bmN0aW9uID0gY2FsY3VsYXRlSW5QbGFjZVBvc2l0aW9uO1xuXG4gIEBJbnB1dCgpXG4gIGRpc2FibGVkID0gZmFsc2U7XG5cbiAgQElucHV0KClcbiAgYmVmb3JlT3BlbjogKCgpID0+IGJvb2xlYW4gfCBPYnNlcnZhYmxlPGJvb2xlYW4+KSB8IG51bGwgPSBudWxsO1xuXG4gIEBJbnB1dCgpXG4gIGJlZm9yZUNsb3NlOiAoKCkgPT4gYm9vbGVhbiB8IE9ic2VydmFibGU8Ym9vbGVhbj4pIHwgbnVsbCA9IG51bGw7XG5cbiAgQElucHV0KClcbiAgcHVibGljIHZlcnRpY2FsUG9zaXRpb246IFZlcnRpY2FsUG9zaXRpb24gPSAnYXV0byc7XG4gIEBJbnB1dCgpXG4gIHB1YmxpYyBob3Jpem9udGFsUG9zaXRpb246IEhvcml6b250YWxQb3NpdGlvbiA9ICdhdXRvJztcblxuICBAT3V0cHV0KCdvcGVuJylcbiAgb25PcGVuID0gdGhpcy5pc09wZW4kLnBpcGUoZmlsdGVyKG9wZW4gPT4gb3BlbiA9PT0gdHJ1ZSkpO1xuXG4gIEBPdXRwdXQoJ2Nsb3NlJylcbiAgb25DbG9zZSA9IHRoaXMuaXNPcGVuJC5waXBlKGZpbHRlcihvcGVuID0+IG9wZW4gPT09IGZhbHNlKSk7XG5cbiAgZ2V0IHRyaWdnZXJFbGVtZW50KCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY29udHJvbCAmJiB0aGlzLmNvbnRyb2wuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICB9XG5cbiAgZ2V0IGRyb3Bkb3duRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZHJvcGRvd25JZCk7XG4gIH1cblxuICBAQ29udGVudENoaWxkKGZvcndhcmRSZWYoKCkgPT4gQW5ndWxhckRyb3Bkb3duQ29udGVudENvbXBvbmVudCkpXG4gIHByaXZhdGUgZHJvcGRvd25Db250ZW50PzogQW5ndWxhckRyb3Bkb3duQ29udGVudENvbXBvbmVudDtcblxuICBwcml2YXRlIHVuaXF1ZUlkOiBudW1iZXIgfCBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB3aWR0aDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50O1xuXG4gIGNvbnN0cnVjdG9yKEBJbmplY3QoRE9DVU1FTlQpIGRvY3VtZW50OiBhbnksIEBBdHRyaWJ1dGUoJ2lkJykgaWQ/OiBzdHJpbmcpIHtcbiAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgdGhpcy5pbml0aWFsaXplSWQoaWQpO1xuICAgIHRoaXMuY3JlYXRlRGVmYXVsdFdvcm1ob2xlT3V0bGV0KCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyh7IGRpc2FibGVkIH06IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICBpZiAoXG4gICAgICBkaXNhYmxlZCAmJlxuICAgICAgZGlzYWJsZWQuZmlyc3RDaGFuZ2UgPT09IGZhbHNlICYmXG4gICAgICBkaXNhYmxlZC5jdXJyZW50VmFsdWUgPT09IHRydWUgJiZcbiAgICAgIGRpc2FibGVkLnByZXZpb3VzVmFsdWUgIT09IHRydWVcbiAgICApIHtcbiAgICAgIHRoaXMuZGlzYWJsZSgpO1xuICAgIH1cbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5faXNPcGVuJC5nZXRWYWx1ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IG9wZW4kID0gb2YodHJ1ZSk7XG5cbiAgICBpZiAodGhpcy5iZWZvcmVPcGVuKSB7XG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmJlZm9yZU9wZW4oKTtcbiAgICAgIG9wZW4kID0gcmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSA/IHJlc3VsdCA6IG9mKHJlc3VsdCk7XG4gICAgfVxuXG4gICAgb3BlbiRcbiAgICAgIC5waXBlKFxuICAgICAgICBmaXJzdCgpLFxuICAgICAgICBmaWx0ZXIob3BlbiA9PiBvcGVuID09PSB0cnVlKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLl9pc09wZW4kLm5leHQodHJ1ZSkpO1xuICB9XG5cbiAgY2xvc2Uoc2tpcEZvY3VzID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCAhdGhpcy5faXNPcGVuJC5nZXRWYWx1ZSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IGNsb3NlJCA9IG9mKHRydWUpO1xuXG4gICAgaWYgKHRoaXMuYmVmb3JlQ2xvc2UpIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmVmb3JlQ2xvc2UoKTtcbiAgICAgIGNsb3NlJCA9IHJlc3VsdCBpbnN0YW5jZW9mIE9ic2VydmFibGUgPyByZXN1bHQgOiBvZihyZXN1bHQpO1xuICAgIH1cblxuICAgIGNsb3NlJFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpcnN0KCksXG4gICAgICAgIGZpbHRlcihjbG9zZSA9PiBjbG9zZSA9PT0gdHJ1ZSlcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIHtcbiAgICAgICAgICBoUG9zaXRpb246IG51bGwsXG4gICAgICAgICAgdlBvc2l0aW9uOiBudWxsLFxuICAgICAgICAgIHRvcDogbnVsbCxcbiAgICAgICAgICByaWdodDogbnVsbCxcbiAgICAgICAgICBib3R0b206IG51bGwsXG4gICAgICAgICAgbGVmdDogbnVsbCxcbiAgICAgICAgICB3aWR0aDogbnVsbCxcbiAgICAgICAgICBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb246IG51bGwsXG4gICAgICAgICAgcHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb246IG51bGxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2lzT3BlbiQubmV4dChmYWxzZSk7XG5cbiAgICAgICAgaWYgKCFza2lwRm9jdXMpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJFbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiZcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckVsZW1lbnQudGFiSW5kZXggPiAtMVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyRWxlbWVudC5mb2N1cygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICB0b2dnbGUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuX2lzT3BlbiQuZ2V0VmFsdWUoKSkge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9wZW4oKTtcbiAgICB9XG4gIH1cblxuICBkaXNhYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIGVuYWJsZSgpOiB2b2lkIHtcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICByZXBvc2l0aW9uID0gKCk6IEFuZ3VsYXJEcm9wZG93blBvc2l0aW9uQ2hhbmdlcyB8IG51bGwgPT4ge1xuICAgIGlmICghdGhpcy5faXNPcGVuJC5nZXRWYWx1ZSgpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBkcm9wZG93bkVsZW1lbnQgPSB0aGlzLmRyb3Bkb3duRWxlbWVudDtcbiAgICBpZiAoIWRyb3Bkb3duRWxlbWVudCB8fCAhdGhpcy50cmlnZ2VyRWxlbWVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgX2NhbGN1bGF0ZVBvc2l0aW9uID0gdGhpcy5yZW5kZXJJblBsYWNlXG4gICAgICA/IHRoaXMuY2FsY3VsYXRlSW5QbGFjZVBvc2l0aW9uXG4gICAgICA6IHRoaXMuY2FsY3VsYXRlUG9zaXRpb247XG5cbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgaG9yaXpvbnRhbFBvc2l0aW9uOiB0aGlzLmhvcml6b250YWxQb3NpdGlvbixcbiAgICAgIHZlcnRpY2FsUG9zaXRpb246IHRoaXMudmVydGljYWxQb3NpdGlvbixcbiAgICAgIG1hdGNoVHJpZ2dlcldpZHRoOiB0aGlzLm1hdGNoVHJpZ2dlcldpZHRoLFxuICAgICAgcHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb246IHRoaXMucHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb24sXG4gICAgICBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb246IHRoaXMucHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uXG4gICAgfTtcblxuICAgIGNvbnN0IHBvc2l0aW9uRGF0YSA9IF9jYWxjdWxhdGVQb3NpdGlvbihcbiAgICAgIHRoaXMudHJpZ2dlckVsZW1lbnQsXG4gICAgICBkcm9wZG93bkVsZW1lbnQsXG4gICAgICBvcHRpb25zXG4gICAgKTtcblxuICAgIHJldHVybiB0aGlzLmFwcGx5UmVwb3NpdGlvbihcbiAgICAgIHRoaXMudHJpZ2dlckVsZW1lbnQsXG4gICAgICBkcm9wZG93bkVsZW1lbnQsXG4gICAgICBwb3NpdGlvbkRhdGFcbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgYXBwbHlSZXBvc2l0aW9uKFxuICAgIHRyaWdnZXI6IEVsZW1lbnQsXG4gICAgZHJvcGRvd246IEhUTUxFbGVtZW50LFxuICAgIHBvc2l0aW9uczogYW55XG4gICk6IEFuZ3VsYXJEcm9wZG93blBvc2l0aW9uQ2hhbmdlcyB7XG4gICAgY29uc3QgY2hhbmdlczogYW55ID0ge1xuICAgICAgaFBvc2l0aW9uOiBwb3NpdGlvbnMuaG9yaXpvbnRhbFBvc2l0aW9uLFxuICAgICAgdlBvc2l0aW9uOiBwb3NpdGlvbnMudmVydGljYWxQb3NpdGlvblxuICAgIH07XG4gICAgaWYgKHBvc2l0aW9ucy5zdHlsZSkge1xuICAgICAgY2hhbmdlcy50b3AgPSBgJHtwb3NpdGlvbnMuc3R5bGUudG9wfXB4YDtcbiAgICAgIC8vIFRoZSBjb21wb25lbnQgY2FuIGJlIGFsaWduZWQgZnJvbSB0aGUgcmlnaHQgb3IgZnJvbSB0aGUgbGVmdCwgYnV0IG5vdCBmcm9tIGJvdGguXG4gICAgICBpZiAocG9zaXRpb25zLnN0eWxlLmxlZnQgIT0gbnVsbCkge1xuICAgICAgICBjaGFuZ2VzLmxlZnQgPSBgJHtwb3NpdGlvbnMuc3R5bGUubGVmdH1weGA7XG4gICAgICAgIGNoYW5nZXMucmlnaHQgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmIChwb3NpdGlvbnMuc3R5bGUucmlnaHQgIT0gbnVsbCkge1xuICAgICAgICBjaGFuZ2VzLnJpZ2h0ID0gYCR7cG9zaXRpb25zLnN0eWxlLnJpZ2h0fXB4YDtcbiAgICAgICAgY2hhbmdlcy5sZWZ0ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmIChwb3NpdGlvbnMuc3R5bGUud2lkdGggIT0gbnVsbCkge1xuICAgICAgICBjaGFuZ2VzLndpZHRoID0gYCR7cG9zaXRpb25zLnN0eWxlLndpZHRofXB4YDtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnBvc2l0aW9uJC5nZXRWYWx1ZSgpLnRvcCA9PSBudWxsKSB7XG4gICAgICAgIC8vIEJ5cGFzcyBvbiB0aGUgZmlyc3QgcmVwb3NpdGlvbiBvbmx5IHRvIGF2b2lkIGZsaWNrZXJpbmcuXG4gICAgICAgIE9iamVjdC5rZXlzKHBvc2l0aW9ucy5zdHlsZSkuZm9yRWFjaChcbiAgICAgICAgICBrID0+IChkcm9wZG93bi5zdHlsZVtrIGFzIGFueV0gPSBwb3NpdGlvbnMuc3R5bGVba10pXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5wb3NpdGlvbiQubmV4dChjaGFuZ2VzKTtcblxuICAgIHRoaXMucHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb24gPSBwb3NpdGlvbnMuaG9yaXpvbnRhbFBvc2l0aW9uO1xuICAgIHRoaXMucHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uID0gcG9zaXRpb25zLnZlcnRpY2FsUG9zaXRpb247XG5cbiAgICByZXR1cm4gY2hhbmdlcztcbiAgfVxuXG4gIHByaXZhdGUgaW5pdGlhbGl6ZUlkKGlkPzogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKGlkKSB7XG4gICAgICB0aGlzLmlkID0gdGhpcy51bmlxdWVJZCA9IGlkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVuaXF1ZUlkID0gZ2VuZXJhdGVEcm9wZG93bklkKCk7XG4gICAgICB0aGlzLmlkID0gYG5nLWRyb3Bkb3duLSR7dGhpcy51bmlxdWVJZH1gO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgY3JlYXRlRGVmYXVsdFdvcm1ob2xlT3V0bGV0KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmctZHJvcGRvd24tb3V0bGV0JykpIHtcbiAgICAgIGNvbnN0IG91dGxldCA9IHRoaXMuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBvdXRsZXQuaWQgPSAnbmctZHJvcGRvd24tb3V0bGV0JztcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5pbnNlcnRCZWZvcmUob3V0bGV0LCB0aGlzLmRvY3VtZW50LmJvZHkuZmlyc3RDaGlsZCk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyB0YWtlVW50aWwgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIEhvc3QsXG4gIEluamVjdCxcbiAgZm9yd2FyZFJlZixcbiAgQWZ0ZXJWaWV3Q2hlY2tlZCxcbiAgT25Jbml0LFxuICBPbkRlc3Ryb3ksXG4gIE5nWm9uZVxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICcuL2FuZ3VsYXItZHJvcGRvd24uZGlyZWN0aXZlJztcbmltcG9ydCB7IGNsb3Nlc3QsIHdhaXRGb3JBbmltYXRpb24gfSBmcm9tICcuL3V0aWxzJztcblxuY29uc3QgTXV0YXRpb25PYnNlcnZlciA9ICh3aW5kb3cgYXMgYW55KS5NdXRhdGlvbk9ic2VydmVyO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduZy1kcm9wZG93bi1jb250ZW50LFtuZy1kcm9wZG93bi1jb250ZW50XSxbbmdEcm9wZG93bkNvbnRlbnRdJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2FuZ3VsYXItZHJvcGRvd24tY29udGVudC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2FuZ3VsYXItZHJvcGRvd24tY29udGVudC5jb21wb25lbnQuY3NzJ10sXG4gIGhvc3Q6IHtcbiAgICAnW2NsYXNzLnJlbmRlci1pbi1wbGFjZV0nOiAnZHJvcGRvd24ucmVuZGVySW5QbGFjZSdcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50XG4gIGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdDaGVja2VkLCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKVxuICBkcm9wZG93bkNsYXNzID0gJyc7XG5cbiAgQElucHV0KClcbiAgb3ZlcmxheSA9IGZhbHNlO1xuXG4gIHByaXZhdGUgaGFzTW92ZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfYW5pbWF0aW9uQ2xhc3M6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlzVG91Y2hEZXZpY2U6IGJvb2xlYW4gPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3c7XG4gIHByaXZhdGUgbXV0YXRpb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGRlc3Ryb3kkID0gbmV3IFN1YmplY3Q8dm9pZD4oKTtcblxuICBASW5wdXQoKVxuICB0cmFuc2l0aW9uaW5nSW5DbGFzcyA9ICduZy1kcm9wZG93bi1jb250ZW50LS10cmFuc2l0aW9uaW5nLWluJztcbiAgQElucHV0KClcbiAgdHJhbnNpdGlvbmVkSW5DbGFzcyA9ICduZy1kcm9wZG93bi1jb250ZW50LS10cmFuc2l0aW9uZWQtaW4nO1xuICBASW5wdXQoKVxuICB0cmFuc2l0aW9uaW5nT3V0Q2xhc3MgPSAnbmctZHJvcGRvd24tY29udGVudC0tdHJhbnNpdGlvbmluZy1vdXQnO1xuXG4gIHByaXZhdGUgZ2V0IGRyb3Bkb3duRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duLmRyb3Bkb3duRWxlbWVudDtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkT3BlbiA9IGZhbHNlO1xuICBwcml2YXRlIGRvY3VtZW50OiBEb2N1bWVudDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBASG9zdCgpXG4gICAgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSkpXG4gICAgcHVibGljIGRyb3Bkb3duOiBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUsXG4gICAgcHJpdmF0ZSB6b25lOiBOZ1pvbmUsXG4gICAgQEluamVjdChET0NVTUVOVCkgZG9jdW1lbnQ6IGFueVxuICApIHtcbiAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLmRyb3Bkb3duLm9uT3BlblxuICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiAodGhpcy5zaG91bGRPcGVuID0gdHJ1ZSkpO1xuXG4gICAgdGhpcy5kcm9wZG93bi5vbkNsb3NlXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuY2xvc2UoKSk7XG4gIH1cblxuICBzZXQgYW5pbWF0aW9uQ2xhc3MoY2xhc3NOYW1lOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgaWYgKHRoaXMuZHJvcGRvd25FbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICBpZiAodGhpcy5fYW5pbWF0aW9uQ2xhc3MgJiYgY2xhc3NOYW1lICE9PSB0aGlzLl9hbmltYXRpb25DbGFzcykge1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2FuaW1hdGlvbkNsYXNzKTtcbiAgICAgIH0gZWxzZSBpZiAoY2xhc3NOYW1lKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5fYW5pbWF0aW9uQ2xhc3MgPSBjbGFzc05hbWU7XG4gIH1cblxuICBnZXQgYW5pbWF0aW9uQ2xhc3MoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX2FuaW1hdGlvbkNsYXNzO1xuICB9XG5cbiAgZ2V0IHRyaWdnZXJFbGVtZW50KCk6IEVsZW1lbnQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5kcm9wZG93bi50cmlnZ2VyRWxlbWVudDtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICBpZiAodGhpcy5zaG91bGRPcGVuKSB7XG4gICAgICB0aGlzLmFuaW1hdGlvbkNsYXNzID0gdGhpcy50cmFuc2l0aW9uaW5nSW5DbGFzcztcbiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLm9wZW4oKSk7XG4gICAgICB0aGlzLnNob3VsZE9wZW4gPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpOiB2b2lkIHtcbiAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB0aGlzLnRlYXJkb3duRXZlbnRzKCk7XG4gIH1cblxuICBvcGVuKCk6IHZvaWQge1xuICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ21vdXNlZG93bicsXG4gICAgICB0aGlzLmhhbmRsZVJvb3RNb3VzZURvd24sXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGlmICh0aGlzLmlzVG91Y2hEZXZpY2UpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAndG91Y2hzdGFydCcsXG4gICAgICAgIHRoaXMudG91Y2hTdGFydEhhbmRsZXIsXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgICB0aGlzLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ3RvdWNoZW5kJyxcbiAgICAgICAgdGhpcy5oYW5kbGVSb290TW91c2VEb3duLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmRyb3Bkb3duLnJlcG9zaXRpb24oKTtcbiAgICBpZiAoIXRoaXMuZHJvcGRvd24ucmVuZGVySW5QbGFjZSkge1xuICAgICAgdGhpcy5hZGRHbG9iYWxFdmVudHMoKTtcbiAgICAgIHRoaXMuc3RhcnRPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTtcbiAgICB9IGVsc2UgaWYgKGNoYW5nZXMgIT09IG51bGwgJiYgY2hhbmdlcy52UG9zaXRpb24gPT09ICdhYm92ZScpIHtcbiAgICAgIHRoaXMuc3RhcnRPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTtcbiAgICB9XG5cbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5hbmltYXRlSW4oKSk7XG4gIH1cblxuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRlYXJkb3duRXZlbnRzKCk7XG4gICAgdGhpcy5hbmltYXRlT3V0KCk7XG4gIH1cblxuICBwcml2YXRlIHJlcG9zaXRpb25JblpvbmUgPSAoKSA9PlxuICAgIHRoaXMuem9uZS5ydW4oKCkgPT4gdGhpcy5kcm9wZG93bi5yZXBvc2l0aW9uKCkpO1xuXG4gIHByaXZhdGUgYW5pbWF0ZUluKCk6IHZvaWQge1xuICAgIHdhaXRGb3JBbmltYXRpb24odGhpcy5kcm9wZG93bkVsZW1lbnQsICgpID0+IHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uQ2xhc3MgPSB0aGlzLnRyYW5zaXRpb25lZEluQ2xhc3M7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFuaW1hdGVPdXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZHJvcGRvd25FbGVtZW50ID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGFyZW50RWxlbWVudCA9IHRoaXMuZHJvcGRvd24ucmVuZGVySW5QbGFjZVxuICAgICAgPyB0aGlzLmRyb3Bkb3duRWxlbWVudC5wYXJlbnRFbGVtZW50IS5wYXJlbnRFbGVtZW50IVxuICAgICAgOiB0aGlzLmRyb3Bkb3duRWxlbWVudC5wYXJlbnRFbGVtZW50ITtcbiAgICBjb25zdCBjbG9uZSA9IHRoaXMuZHJvcGRvd25FbGVtZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICBjbG9uZS5pZCA9IGAke3RoaXMuZHJvcGRvd25FbGVtZW50LmlkfS0tY2xvbmVgO1xuICAgIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUodGhpcy50cmFuc2l0aW9uZWRJbkNsYXNzKTtcbiAgICBjbG9uZS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMudHJhbnNpdGlvbmluZ0luQ2xhc3MpO1xuICAgIGNsb25lLmNsYXNzTGlzdC5hZGQodGhpcy50cmFuc2l0aW9uaW5nT3V0Q2xhc3MpO1xuICAgIHBhcmVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoY2xvbmUpO1xuICAgIHRoaXMuYW5pbWF0aW9uQ2xhc3MgPSB0aGlzLnRyYW5zaXRpb25pbmdJbkNsYXNzO1xuICAgIHdhaXRGb3JBbmltYXRpb24oY2xvbmUsICgpID0+IHBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoY2xvbmUpKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUm9vdE1vdXNlRG93biA9IChlOiBFdmVudCk6IHZvaWQgPT4ge1xuICAgIGNvbnN0IHsgdGFyZ2V0IH0gPSBlIGFzIEV2ZW50ICYgeyB0YXJnZXQ6IEVsZW1lbnQgfTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMuaGFzTW92ZWQgfHxcbiAgICAgICh0aGlzLmRyb3Bkb3duRWxlbWVudCAhPT0gbnVsbCAmJlxuICAgICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudC5jb250YWlucyh0YXJnZXQpKSB8fFxuICAgICAgKHRoaXMudHJpZ2dlckVsZW1lbnQgIT09IG51bGwgJiYgdGhpcy50cmlnZ2VyRWxlbWVudC5jb250YWlucyh0YXJnZXQpKVxuICAgICkge1xuICAgICAgdGhpcy5oYXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGNsb3Nlc3REcm9wZG93biA9IGNsb3Nlc3QodGFyZ2V0LCAnbmctZHJvcGRvd24tY29udGVudCcpO1xuICAgIGlmIChjbG9zZXN0RHJvcGRvd24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHRyaWdnZXIgPSB0aGlzLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgIGBbYXJpYS1jb250cm9scz0ke2Nsb3Nlc3REcm9wZG93bi5nZXRBdHRyaWJ1dGUoJ2lkJyl9XWBcbiAgICAgICk7XG4gICAgICBjb25zdCBwYXJlbnREcm9wZG93biA9IGNsb3Nlc3QodHJpZ2dlciEsICduZy1kcm9wZG93bi1jb250ZW50Jyk7XG4gICAgICBpZiAoXG4gICAgICAgIHBhcmVudERyb3Bkb3duICE9PSBudWxsICYmXG4gICAgICAgIHBhcmVudERyb3Bkb3duLmdldEF0dHJpYnV0ZSgnaWQnKSA9PT0gdGhpcy5kcm9wZG93bi5kcm9wZG93bklkXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5oYXNNb3ZlZCA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kcm9wZG93bi5jbG9zZSh0cnVlKTtcbiAgfTtcblxuICBwcml2YXRlIHN0YXJ0T2JzZXJ2aW5nRG9tTXV0YXRpb25zKCk6IHZvaWQge1xuICAgIGlmIChNdXRhdGlvbk9ic2VydmVyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMubXV0YXRpb25PYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnM6IGFueSkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgbXV0YXRpb25zWzBdLmFkZGVkTm9kZXMubGVuZ3RoIHx8XG4gICAgICAgICAgbXV0YXRpb25zWzBdLnJlbW92ZWROb2Rlcy5sZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5yZXBvc2l0aW9uSW5ab25lKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyIS5vYnNlcnZlKHRoaXMuZHJvcGRvd25FbGVtZW50ISwge1xuICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgIHN1YnRyZWU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudCEuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ0RPTU5vZGVJbnNlcnRlZCcsXG4gICAgICAgIHRoaXMucmVwb3NpdGlvbkluWm9uZSxcbiAgICAgICAgZmFsc2VcbiAgICAgICk7XG4gICAgICB0aGlzLmRyb3Bkb3duRWxlbWVudCEuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ0RPTU5vZGVSZW1vdmVkJyxcbiAgICAgICAgdGhpcy5yZXBvc2l0aW9uSW5ab25lLFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHN0b3BPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKE11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGlmICh0aGlzLm11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbnVsbDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZHJvcGRvd25FbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgJ0RPTU5vZGVJbnNlcnRlZCcsXG4gICAgICAgICAgdGhpcy5yZXBvc2l0aW9uSW5ab25lXG4gICAgICAgICk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgJ0RPTU5vZGVSZW1vdmVkJyxcbiAgICAgICAgICB0aGlzLnJlcG9zaXRpb25JblpvbmVcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFkZEdsb2JhbEV2ZW50cygpOiB2b2lkIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5yZXBvc2l0aW9uSW5ab25lKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXBvc2l0aW9uSW5ab25lKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLnJlcG9zaXRpb25JblpvbmUpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVHbG9iYWxFdmVudHMoKTogdm9pZCB7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMucmVwb3NpdGlvbkluWm9uZSk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMucmVwb3NpdGlvbkluWm9uZSk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ29yaWVudGF0aW9uY2hhbmdlJywgdGhpcy5yZXBvc2l0aW9uSW5ab25lKTtcbiAgfVxuXG4gIHByaXZhdGUgdG91Y2hTdGFydEhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICB0aGlzLmRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgdGhpcy50b3VjaE1vdmVIYW5kbGVyLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSB0b3VjaE1vdmVIYW5kbGVyID0gKGU6IEV2ZW50KSA9PiB7XG4gICAgdGhpcy5oYXNNb3ZlZCA9IHRydWU7XG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAndG91Y2htb3ZlJyxcbiAgICAgIHRoaXMudG91Y2hNb3ZlSGFuZGxlcixcbiAgICAgIHRydWVcbiAgICApO1xuICB9O1xuXG4gIHByaXZhdGUgdGVhcmRvd25FdmVudHMoKSB7XG4gICAgdGhpcy5yZW1vdmVHbG9iYWxFdmVudHMoKTtcbiAgICB0aGlzLnN0b3BPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTtcbiAgICB0aGlzLmRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICdtb3VzZWRvd24nLFxuICAgICAgdGhpcy5oYW5kbGVSb290TW91c2VEb3duLFxuICAgICAgdHJ1ZVxuICAgICk7XG5cbiAgICBpZiAodGhpcy5pc1RvdWNoRGV2aWNlKSB7XG4gICAgICB0aGlzLmRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ3RvdWNoc3RhcnQnLFxuICAgICAgICB0aGlzLnRvdWNoU3RhcnRIYW5kbGVyLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaGVuZCcsXG4gICAgICAgIHRoaXMuaGFuZGxlUm9vdE1vdXNlRG93bixcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IE5nTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5pbXBvcnQgeyBOZ1dvcm1ob2xlTW9kdWxlIH0gZnJvbSAnbmctd29ybWhvbGUnO1xuXG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUgfSBmcm9tICcuL2FuZ3VsYXItZHJvcGRvd24uZGlyZWN0aXZlJztcbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkNvbnRlbnRDb21wb25lbnQgfSBmcm9tICcuL2FuZ3VsYXItZHJvcGRvd24tY29udGVudC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi1jb250cm9sLmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIE5nV29ybWhvbGVNb2R1bGVdLFxuICBkZWNsYXJhdGlvbnM6IFtcbiAgICBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUsXG4gICAgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSxcbiAgICBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50XG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBBbmd1bGFyRHJvcGRvd25EaXJlY3RpdmUsXG4gICAgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSxcbiAgICBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckRyb3Bkb3duTW9kdWxlIHt9XG4iXSwibmFtZXMiOlsiRGlyZWN0aXZlIiwiSG9zdCIsIkluamVjdCIsImZvcndhcmRSZWYiLCJFbGVtZW50UmVmIiwiSG9zdExpc3RlbmVyIiwiQmVoYXZpb3JTdWJqZWN0Iiwic2tpcCIsImZpbHRlciIsIm9mIiwiT2JzZXJ2YWJsZSIsImZpcnN0IiwiRE9DVU1FTlQiLCJBdHRyaWJ1dGUiLCJJbnB1dCIsIkNvbnRlbnRDaGlsZCIsIk91dHB1dCIsIlN1YmplY3QiLCJ0YWtlVW50aWwiLCJDb21wb25lbnQiLCJOZ1pvbmUiLCJOZ01vZHVsZSIsIkNvbW1vbk1vZHVsZSIsIk5nV29ybWhvbGVNb2R1bGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtRQWlDRSx5Q0FHVyxRQUFrQyxFQUNsQyxPQUFtQjtZQURuQixhQUFRLEdBQVIsUUFBUSxDQUEwQjtZQUNsQyxZQUFPLEdBQVAsT0FBTyxDQUFZO1NBQzdCOzs7OztRQWJELGlEQUFPOzs7O1lBRFAsVUFDUSxDQUFRO2dCQUNkLENBQUMsQ0FBQyxlQUFlLEVBQUUsQ0FBQztnQkFFcEIsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsUUFBUSxFQUFFO29CQUMzQixJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDO2lCQUN4QjthQUNGOztvQkFsQkZBLGNBQVMsU0FBQzt3QkFDVCxRQUFRLEVBQUUsMkNBQTJDO3dCQUNyRCxJQUFJLEVBQUU7NEJBQ0osc0JBQXNCLEVBQUUsTUFBTTs0QkFDOUIsc0JBQXNCLEVBQUUsYUFBYTs0QkFDckMsc0JBQXNCLEVBQUUsaUJBQWlCOzRCQUN6Qyw2QkFBNkIsRUFBRSxNQUFNOzRCQUNyQyxnQkFBZ0IsRUFBRSxpQkFBaUI7eUJBQ3BDO3FCQUNGOzs7O3dCQVpRLHdCQUF3Qix1QkF3QjFCQyxTQUFJLFlBQ0pDLFdBQU0sU0FBQ0MsZUFBVSxDQUFDLGNBQU0sT0FBQSx3QkFBd0IsR0FBQSxDQUFDO3dCQWpDdERDLGVB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