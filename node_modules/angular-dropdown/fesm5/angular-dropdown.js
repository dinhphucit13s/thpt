import { Directive, ElementRef, Inject, forwardRef, Host, HostListener, Attribute, Input, Output, ContentChild, Component, NgZone, NgModule } from '@angular/core';
import { Observable, BehaviorSubject, of, Subject } from 'rxjs';
import { skip, first, filter, takeUntil } from 'rxjs/operators';
import { DOCUMENT, CommonModule } from '@angular/common';
import { NgWormholeModule } from 'ng-wormhole';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var AngularDropdownControlDirective = /** @class */ (function () {
    function AngularDropdownControlDirective(dropdown, element) {
        this.dropdown = dropdown;
        this.element = element;
    }
    /**
     * @param {?} e
     * @return {?}
     */
    AngularDropdownControlDirective.prototype.onClick = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        e.stopPropagation();
        if (!this.dropdown.disabled) {
            this.dropdown.toggle();
        }
    };
    AngularDropdownControlDirective.decorators = [
        { type: Directive, args: [{
                    selector: '[ng-dropdown-control],[ngDropdownControl]',
                    host: {
                        '[attr.aria-haspopup]': 'true',
                        '[attr.aria-controls]': 'dropdown.id',
                        '[attr.aria-expanded]': 'dropdown.isOpen',
                        '[class.ng-dropdown-control]': 'true',
                        '[class.active]': 'dropdown.isOpen'
                    }
                },] }
    ];
    AngularDropdownControlDirective.ctorParameters = function () { return [
        { type: AngularDropdownDirective, decorators: [{ type: Host }, { type: Inject, args: [forwardRef(function () { return AngularDropdownDirective; }),] }] },
        { type: ElementRef }
    ]; };
    AngularDropdownControlDirective.propDecorators = {
        onClick: [{ type: HostListener, args: ['click', ['$event'],] }]
    };
    return AngularDropdownControlDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/**
 * @param {?} element
 * @param {?} callback
 * @return {?}
 */
function waitForAnimation(element, callback) {
    if (element === null) {
        return;
    }
    requestAnimationFrame(function () {
        /** @type {?} */
        var computedStyle = window.getComputedStyle(element);
        if (computedStyle.animationName !== 'none' &&
            computedStyle.animationPlayState === 'running') {
            return once(element, 'animationend', callback);
        }
        callback();
    });
}
/**
 * @param {?} element
 * @param {?} eventName
 * @param {?} listener
 * @return {?}
 */
function once(element, eventName, listener) {
    element.addEventListener(eventName, function listenOnce(e) {
        element.removeEventListener(eventName, listenOnce);
        return listener(e);
    });
}
/** @type {?} */
var closest = ((/** @type {?} */ (window))).Element && Element.prototype.closest
    ? function (el, s) { return el.closest(s); }
    : function _closest(self, s) {
        /** @type {?} */
        var matches = (((/** @type {?} */ (self))).document || self.ownerDocument).querySelectorAll(s);
        /** @type {?} */
        var i;
        /** @type {?} */
        var el = self;
        do {
            i = matches.length;
            while (--i >= 0 && matches.item(i) !== el) { }
        } while (i < 0 && (el = el.parentElement));
        return el;
    };
/**
 * @param {?} trigger
 * @param {?} dropdown
 * @param {?} __2
 * @return {?}
 */
function calculatePosition(trigger, dropdown, _a) {
    var horizontalPosition = _a.horizontalPosition, verticalPosition = _a.verticalPosition, matchTriggerWidth = _a.matchTriggerWidth, previousHorizontalPosition = _a.previousHorizontalPosition, previousVerticalPosition = _a.previousVerticalPosition;
    // Collect information about all the involved DOM elements
    /** @type {?} */
    var scroll = { left: window.pageXOffset, top: window.pageYOffset };
    var _b = trigger.getBoundingClientRect(), triggerLeft = _b.left, triggerTop = _b.top, triggerWidth = _b.width, triggerHeight = _b.height;
    var _c = dropdown.getBoundingClientRect(), dropdownHeight = _c.height, dropdownWidth = _c.width;
    /** @type {?} */
    var viewportWidth = window.innerWidth;
    /** @type {?} */
    var style = {};
    // Calculate drop down width
    dropdownWidth = matchTriggerWidth ? triggerWidth : dropdownWidth;
    if (matchTriggerWidth) {
        style.width = dropdownWidth;
    }
    // Calculate horizontal position
    /** @type {?} */
    var triggerLeftWithScroll = triggerLeft + scroll.left;
    if (horizontalPosition === 'auto') {
        // Calculate the number of visible horizontal pixels if we were to place the
        // dropdown on the left and right
        /** @type {?} */
        var leftVisible = Math.min(viewportWidth, triggerLeft + dropdownWidth) -
            Math.max(0, triggerLeft);
        /** @type {?} */
        var rightVisible = Math.min(viewportWidth, triggerLeft + triggerWidth) -
            Math.max(0, triggerLeft + triggerWidth - dropdownWidth);
        if (dropdownWidth > leftVisible && rightVisible > leftVisible) {
            // If the drop down won't fit left-aligned, and there is more space on the
            // right than on the left, then force right-aligned
            horizontalPosition = 'right';
        }
        else if (dropdownWidth > rightVisible && leftVisible > rightVisible) {
            // If the drop down won't fit right-aligned, and there is more space on
            // the left than on the right, then force left-aligned
            horizontalPosition = 'left';
        }
        else {
            // Keep same position as previous
            horizontalPosition = previousHorizontalPosition || 'left';
        }
    }
    if (horizontalPosition === 'right') {
        style.right = viewportWidth - (triggerLeftWithScroll + triggerWidth);
    }
    else if (horizontalPosition === 'center') {
        style.left = triggerLeftWithScroll + (triggerWidth - dropdownWidth) / 2;
    }
    else {
        style.left = triggerLeftWithScroll;
    }
    // Calculate vertical position
    /** @type {?} */
    var triggerTopWithScroll = triggerTop + scroll.top;
    if (verticalPosition === 'above') {
        style.top = triggerTopWithScroll - dropdownHeight;
    }
    else if (verticalPosition === 'below') {
        style.top = triggerTopWithScroll + triggerHeight;
    }
    else {
        /** @type {?} */
        var viewportBottom = scroll.top + self.window.innerHeight;
        /** @type {?} */
        var enoughRoomBelow = triggerTopWithScroll + triggerHeight + dropdownHeight < viewportBottom;
        /** @type {?} */
        var enoughRoomAbove = triggerTop > dropdownHeight;
        if (previousVerticalPosition === 'below' &&
            !enoughRoomBelow &&
            enoughRoomAbove) {
            verticalPosition = 'above';
        }
        else if (previousVerticalPosition === 'above' &&
            !enoughRoomAbove &&
            enoughRoomBelow) {
            verticalPosition = 'below';
        }
        else if (!previousVerticalPosition) {
            verticalPosition = enoughRoomBelow ? 'below' : 'above';
        }
        else {
            verticalPosition = previousVerticalPosition;
        }
        style.top =
            triggerTopWithScroll +
                (verticalPosition === 'below' ? triggerHeight : -dropdownHeight);
    }
    return { horizontalPosition: horizontalPosition, verticalPosition: verticalPosition, style: style };
}
/**
 * @param {?} trigger
 * @param {?} dropdown
 * @param {?} __2
 * @return {?}
 */
function calculateInPlacePosition(trigger, dropdown, _a) {
    var horizontalPosition = _a.horizontalPosition, verticalPosition = _a.verticalPosition;
    /** @type {?} */
    var dropdownRect;
    /** @type {?} */
    var positionData = {};
    if (horizontalPosition === 'auto') {
        /** @type {?} */
        var triggerRect = trigger.getBoundingClientRect();
        dropdownRect = dropdown.getBoundingClientRect();
        /** @type {?} */
        var viewportRight = window.pageXOffset + window.innerWidth;
        positionData.horizontalPosition =
            triggerRect.left + dropdownRect.width > viewportRight ? 'right' : 'left';
    }
    if (verticalPosition === 'above') {
        positionData.verticalPosition = verticalPosition;
        dropdownRect = dropdownRect || dropdown.getBoundingClientRect();
        positionData.style = { top: -dropdownRect.height };
    }
    return positionData;
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var _id = 1;
/**
 * @return {?}
 */
function generateDropdownId() {
    return _id++;
}
/** @type {?} */
var EmptyDropdownContentPosition = Object.freeze({
    vPosition: null,
    hPosition: null,
    top: null,
    left: null,
    bottom: null,
    right: null
});
var AngularDropdownDirective = /** @class */ (function () {
    function AngularDropdownDirective(document, id) {
        var _this = this;
        this.renderInPlace = false;
        this.control = null;
        this.previousVerticalPosition = null;
        this.previousHorizontalPosition = null;
        this.matchTriggerWidth = false;
        this._isOpen$ = new BehaviorSubject(false);
        this.isOpen$ = this._isOpen$.pipe(skip(1));
        this.position$ = new BehaviorSubject(EmptyDropdownContentPosition);
        this.calculatePosition = calculatePosition;
        this.calculateInPlacePosition = calculateInPlacePosition;
        this.disabled = false;
        this.beforeOpen = null;
        this.beforeClose = null;
        this.verticalPosition = 'auto';
        this.horizontalPosition = 'auto';
        this.onOpen = this.isOpen$.pipe(filter(function (open) { return open === true; }));
        this.onClose = this.isOpen$.pipe(filter(function (open) { return open === false; }));
        this.uniqueId = null;
        this.width = null;
        this.reposition = function () {
            if (!_this._isOpen$.getValue()) {
                return null;
            }
            /** @type {?} */
            var dropdownElement = _this.dropdownElement;
            if (!dropdownElement || !_this.triggerElement) {
                return null;
            }
            /** @type {?} */
            var _calculatePosition = _this.renderInPlace
                ? _this.calculateInPlacePosition
                : _this.calculatePosition;
            /** @type {?} */
            var options = {
                horizontalPosition: _this.horizontalPosition,
                verticalPosition: _this.verticalPosition,
                matchTriggerWidth: _this.matchTriggerWidth,
                previousHorizontalPosition: _this.previousHorizontalPosition,
                previousVerticalPosition: _this.previousVerticalPosition
            };
            /** @type {?} */
            var positionData = _calculatePosition(_this.triggerElement, dropdownElement, options);
            return _this.applyReposition(_this.triggerElement, dropdownElement, positionData);
        };
        this.document = document;
        this.initializeId(id);
        this.createDefaultWormholeOutlet();
    }
    Object.defineProperty(AngularDropdownDirective.prototype, "dropdownId", {
        get: /**
         * @return {?}
         */
        function () {
            return "ng-dropdown-content-" + this.uniqueId;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AngularDropdownDirective.prototype, "triggerElement", {
        get: /**
         * @return {?}
         */
        function () {
            return this.control && this.control.element.nativeElement;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AngularDropdownDirective.prototype, "dropdownElement", {
        get: /**
         * @return {?}
         */
        function () {
            return this.document.getElementById(this.dropdownId);
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @param {?} __0
     * @return {?}
     */
    AngularDropdownDirective.prototype.ngOnChanges = /**
     * @param {?} __0
     * @return {?}
     */
    function (_a) {
        var disabled = _a.disabled;
        if (disabled &&
            disabled.firstChange === false &&
            disabled.currentValue === true &&
            disabled.previousValue !== true) {
            this.disable();
        }
    };
    /**
     * @return {?}
     */
    AngularDropdownDirective.prototype.open = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.disabled || this._isOpen$.getValue()) {
            return;
        }
        /** @type {?} */
        var open$ = of(true);
        if (this.beforeOpen) {
            /** @type {?} */
            var result = this.beforeOpen();
            open$ = result instanceof Observable ? result : of(result);
        }
        open$
            .pipe(first(), filter(function (open) { return open === true; }))
            .subscribe(function () { return _this._isOpen$.next(true); });
    };
    /**
     * @param {?=} skipFocus
     * @return {?}
     */
    AngularDropdownDirective.prototype.close = /**
     * @param {?=} skipFocus
     * @return {?}
     */
    function (skipFocus) {
        var _this = this;
        if (skipFocus === void 0) { skipFocus = false; }
        if (this.disabled || !this._isOpen$.getValue()) {
            return;
        }
        /** @type {?} */
        var close$ = of(true);
        if (this.beforeClose) {
            /** @type {?} */
            var result = this.beforeClose();
            close$ = result instanceof Observable ? result : of(result);
        }
        close$
            .pipe(first(), filter(function (close) { return close === true; }))
            .subscribe(function () {
            Object.assign(_this, {
                hPosition: null,
                vPosition: null,
                top: null,
                right: null,
                bottom: null,
                left: null,
                width: null,
                previousVerticalPosition: null,
                previousHorizontalPosition: null
            });
            _this._isOpen$.next(false);
            if (!skipFocus) {
                if (_this.triggerElement instanceof HTMLElement &&
                    _this.triggerElement.tabIndex > -1) {
                    _this.triggerElement.focus();
                }
            }
        });
    };
    /**
     * @return {?}
     */
    AngularDropdownDirective.prototype.toggle = /**
     * @return {?}
     */
    function () {
        if (this._isOpen$.getValue()) {
            this.close();
        }
        else {
            this.open();
        }
    };
    /**
     * @return {?}
     */
    AngularDropdownDirective.prototype.disable = /**
     * @return {?}
     */
    function () {
        this.disabled = true;
        this.close();
    };
    /**
     * @return {?}
     */
    AngularDropdownDirective.prototype.enable = /**
     * @return {?}
     */
    function () {
        this.disabled = false;
    };
    /**
     * @param {?} trigger
     * @param {?} dropdown
     * @param {?} positions
     * @return {?}
     */
    AngularDropdownDirective.prototype.applyReposition = /**
     * @param {?} trigger
     * @param {?} dropdown
     * @param {?} positions
     * @return {?}
     */
    function (trigger, dropdown, positions) {
        /** @type {?} */
        var changes = {
            hPosition: positions.horizontalPosition,
            vPosition: positions.verticalPosition
        };
        if (positions.style) {
            changes.top = positions.style.top + "px";
            // The component can be aligned from the right or from the left, but not from both.
            if (positions.style.left != null) {
                changes.left = positions.style.left + "px";
                changes.right = null;
            }
            else if (positions.style.right != null) {
                changes.right = positions.style.right + "px";
                changes.left = null;
            }
            if (positions.style.width != null) {
                changes.width = positions.style.width + "px";
            }
            if (this.position$.getValue().top == null) {
                // Bypass on the first reposition only to avoid flickering.
                Object.keys(positions.style).forEach(function (k) { return (dropdown.style[(/** @type {?} */ (k))] = positions.style[k]); });
            }
        }
        this.position$.next(changes);
        this.previousHorizontalPosition = positions.horizontalPosition;
        this.previousVerticalPosition = positions.verticalPosition;
        return changes;
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    AngularDropdownDirective.prototype.initializeId = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id) {
            this.id = this.uniqueId = id;
        }
        else {
            this.uniqueId = generateDropdownId();
            this.id = "ng-dropdown-" + this.uniqueId;
        }
    };
    /**
     * @return {?}
     */
    AngularDropdownDirective.prototype.createDefaultWormholeOutlet = /**
     * @return {?}
     */
    function () {
        if (!this.document.getElementById('ng-dropdown-outlet')) {
            /** @type {?} */
            var outlet = this.document.createElement('div');
            outlet.id = 'ng-dropdown-outlet';
            this.document.body.insertBefore(outlet, this.document.body.firstChild);
        }
    };
    AngularDropdownDirective.decorators = [
        { type: Directive, args: [{
                    selector: 'ng-dropdown,[ngDropdown],[ng-dropdown]',
                    host: {
                        '[class.render-in-place]': 'renderInPlace',
                        '[class.ng-dropdown]': 'true'
                    }
                },] }
    ];
    AngularDropdownDirective.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },
        { type: String, decorators: [{ type: Attribute, args: ['id',] }] }
    ]; };
    AngularDropdownDirective.propDecorators = {
        renderInPlace: [{ type: Input }],
        control: [{ type: ContentChild, args: [AngularDropdownControlDirective,] }],
        calculatePosition: [{ type: Input }],
        calculateInPlacePosition: [{ type: Input }],
        disabled: [{ type: Input }],
        beforeOpen: [{ type: Input }],
        beforeClose: [{ type: Input }],
        verticalPosition: [{ type: Input }],
        horizontalPosition: [{ type: Input }],
        onOpen: [{ type: Output, args: ['open',] }],
        onClose: [{ type: Output, args: ['close',] }],
        dropdownContent: [{ type: ContentChild, args: [forwardRef(function () { return AngularDropdownContentComponent; }),] }]
    };
    return AngularDropdownDirective;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
/** @type {?} */
var MutationObserver = ((/** @type {?} */ (window))).MutationObserver;
var AngularDropdownContentComponent = /** @class */ (function () {
    function AngularDropdownContentComponent(dropdown, zone, document) {
        var _this = this;
        this.dropdown = dropdown;
        this.zone = zone;
        this.dropdownClass = '';
        this.overlay = false;
        this.hasMoved = false;
        this._animationClass = null;
        this.isTouchDevice = 'ontouchstart' in window;
        this.mutationObserver = null;
        this.destroy$ = new Subject();
        this.transitioningInClass = 'ng-dropdown-content--transitioning-in';
        this.transitionedInClass = 'ng-dropdown-content--transitioned-in';
        this.transitioningOutClass = 'ng-dropdown-content--transitioning-out';
        this.shouldOpen = false;
        this.repositionInZone = function () {
            return _this.zone.run(function () { return _this.dropdown.reposition(); });
        };
        this.handleRootMouseDown = function (e) {
            var target = (/** @type {?} */ (e)).target;
            if (_this.hasMoved ||
                (_this.dropdownElement !== null &&
                    _this.dropdownElement.contains(target)) ||
                (_this.triggerElement !== null && _this.triggerElement.contains(target))) {
                _this.hasMoved = false;
                return;
            }
            /** @type {?} */
            var closestDropdown = closest(target, 'ng-dropdown-content');
            if (closestDropdown !== null) {
                /** @type {?} */
                var trigger = _this.document.querySelector("[aria-controls=" + closestDropdown.getAttribute('id') + "]");
                /** @type {?} */
                var parentDropdown = closest((/** @type {?} */ (trigger)), 'ng-dropdown-content');
                if (parentDropdown !== null &&
                    parentDropdown.getAttribute('id') === _this.dropdown.dropdownId) {
                    _this.hasMoved = false;
                    return;
                }
            }
            _this.dropdown.close(true);
        };
        this.touchStartHandler = function (e) {
            _this.document.body.addEventListener('touchmove', _this.touchMoveHandler, true);
        };
        this.touchMoveHandler = function (e) {
            _this.hasMoved = true;
            _this.document.body.removeEventListener('touchmove', _this.touchMoveHandler, true);
        };
        this.document = document;
    }
    Object.defineProperty(AngularDropdownContentComponent.prototype, "dropdownElement", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dropdown.dropdownElement;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.dropdown.onOpen
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return (_this.shouldOpen = true); });
        this.dropdown.onClose
            .pipe(takeUntil(this.destroy$))
            .subscribe(function () { return _this.close(); });
    };
    Object.defineProperty(AngularDropdownContentComponent.prototype, "animationClass", {
        get: /**
         * @return {?}
         */
        function () {
            return this._animationClass;
        },
        set: /**
         * @param {?} className
         * @return {?}
         */
        function (className) {
            if (this.dropdownElement !== null) {
                if (this._animationClass && className !== this._animationClass) {
                    this.dropdownElement.classList.remove(this._animationClass);
                }
                else if (className) {
                    this.dropdownElement.classList.add(className);
                }
            }
            this._animationClass = className;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(AngularDropdownContentComponent.prototype, "triggerElement", {
        get: /**
         * @return {?}
         */
        function () {
            return this.dropdown.triggerElement;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.ngAfterViewChecked = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (this.shouldOpen) {
            this.animationClass = this.transitioningInClass;
            requestAnimationFrame(function () { return _this.open(); });
            this.shouldOpen = false;
        }
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        this.destroy$.next();
        this.teardownEvents();
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.open = /**
     * @return {?}
     */
    function () {
        var _this = this;
        this.document.body.addEventListener('mousedown', this.handleRootMouseDown, true);
        if (this.isTouchDevice) {
            this.document.body.addEventListener('touchstart', this.touchStartHandler, true);
            this.document.body.addEventListener('touchend', this.handleRootMouseDown, true);
        }
        /** @type {?} */
        var changes = this.dropdown.reposition();
        if (!this.dropdown.renderInPlace) {
            this.addGlobalEvents();
            this.startObservingDomMutations();
        }
        else if (changes !== null && changes.vPosition === 'above') {
            this.startObservingDomMutations();
        }
        requestAnimationFrame(function () { return _this.animateIn(); });
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.close = /**
     * @return {?}
     */
    function () {
        this.teardownEvents();
        this.animateOut();
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.animateIn = /**
     * @return {?}
     */
    function () {
        var _this = this;
        waitForAnimation(this.dropdownElement, function () {
            _this.animationClass = _this.transitionedInClass;
        });
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.animateOut = /**
     * @return {?}
     */
    function () {
        if (this.dropdownElement === null) {
            return;
        }
        /** @type {?} */
        var parentElement = this.dropdown.renderInPlace
            ? (/** @type {?} */ ((/** @type {?} */ (this.dropdownElement.parentElement)).parentElement))
            : (/** @type {?} */ (this.dropdownElement.parentElement));
        /** @type {?} */
        var clone = (/** @type {?} */ (this.dropdownElement.cloneNode(true)));
        clone.id = this.dropdownElement.id + "--clone";
        clone.classList.remove(this.transitionedInClass);
        clone.classList.remove(this.transitioningInClass);
        clone.classList.add(this.transitioningOutClass);
        parentElement.appendChild(clone);
        this.animationClass = this.transitioningInClass;
        waitForAnimation(clone, function () { return parentElement.removeChild(clone); });
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.startObservingDomMutations = /**
     * @return {?}
     */
    function () {
        var _this = this;
        if (MutationObserver !== undefined) {
            this.mutationObserver = new MutationObserver(function (mutations) {
                if (mutations[0].addedNodes.length ||
                    mutations[0].removedNodes.length) {
                    _this.repositionInZone();
                }
            });
            (/** @type {?} */ (this.mutationObserver)).observe((/** @type {?} */ (this.dropdownElement)), {
                childList: true,
                subtree: true
            });
        }
        else {
            (/** @type {?} */ (this.dropdownElement)).addEventListener('DOMNodeInserted', this.repositionInZone, false);
            (/** @type {?} */ (this.dropdownElement)).addEventListener('DOMNodeRemoved', this.repositionInZone, false);
        }
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.stopObservingDomMutations = /**
     * @return {?}
     */
    function () {
        if (MutationObserver) {
            if (this.mutationObserver) {
                this.mutationObserver.disconnect();
                this.mutationObserver = null;
            }
        }
        else {
            if (this.dropdownElement !== null) {
                this.dropdownElement.removeEventListener('DOMNodeInserted', this.repositionInZone);
                this.dropdownElement.removeEventListener('DOMNodeRemoved', this.repositionInZone);
            }
        }
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.addGlobalEvents = /**
     * @return {?}
     */
    function () {
        window.addEventListener('scroll', this.repositionInZone);
        window.addEventListener('resize', this.repositionInZone);
        window.addEventListener('orientationchange', this.repositionInZone);
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.removeGlobalEvents = /**
     * @return {?}
     */
    function () {
        window.removeEventListener('scroll', this.repositionInZone);
        window.removeEventListener('resize', this.repositionInZone);
        window.removeEventListener('orientationchange', this.repositionInZone);
    };
    /**
     * @return {?}
     */
    AngularDropdownContentComponent.prototype.teardownEvents = /**
     * @return {?}
     */
    function () {
        this.removeGlobalEvents();
        this.stopObservingDomMutations();
        this.document.body.removeEventListener('mousedown', this.handleRootMouseDown, true);
        if (this.isTouchDevice) {
            this.document.body.removeEventListener('touchstart', this.touchStartHandler, true);
            this.document.body.removeEventListener('touchend', this.handleRootMouseDown, true);
        }
    };
    AngularDropdownContentComponent.decorators = [
        { type: Component, args: [{
                    selector: 'ng-dropdown-content,[ng-dropdown-content],[ngDropdownContent]',
                    template: "<ng-container *ngIf=\"dropdown.isOpen$ | async as isOpen\">\n  <ng-container *ngWormhole=\"'#ng-dropdown-outlet'; renderInPlace: dropdown.renderInPlace\">\n    <div *ngIf=\"overlay && isOpen\" class=\"ng-dropdown-overlay\"></div>\n    <div [id]=\"dropdown.dropdownId\"\n        class=\"ng-dropdown-content {{dropdownClass}}\"\n        [style.top]=\"(dropdown.position$ | async)?.top\"\n        [style.right]=\"(dropdown.position$ | async)?.right\"\n        [style.bottom]=\"(dropdown.position$ | async)?.bottom\"\n        [style.left]=\"(dropdown.position$ | async)?.left\"\n        [class.render-in-place]=\"dropdown.renderInPlace\"\n        [class.ng-dropdown-content--above]=\"(dropdown.position$ | async)?.vPosition === 'above'\"\n        [class.ng-dropdown-content--below]=\"(dropdown.position$ | async)?.vPosition === 'below'\"\n        [class.ng-dropdown-content--right]=\"(dropdown.position$ | async)?.hPosition === 'right'\"\n        [class.ng-dropdown-content--center]=\"(dropdown.position$ | async)?.hPosition === 'center'\"\n        [class.ng-dropdown-content--left]=\"(dropdown.position$ | async)?.hPosition === 'left'\">\n      <ng-content></ng-content>\n    </div>\n  </ng-container>\n  <div *ngIf=\"!isOpen\" [id]=\"dropdown.dropdownId\" class=\"ng-dropdown-placeholder\"></div>\n</ng-container>\n",
                    host: {
                        '[class.render-in-place]': 'dropdown.renderInPlace'
                    },
                    styles: [":host{display:none}:host.render-in-place{display:block;position:absolute}"]
                }] }
    ];
    AngularDropdownContentComponent.ctorParameters = function () { return [
        { type: AngularDropdownDirective, decorators: [{ type: Host }, { type: Inject, args: [forwardRef(function () { return AngularDropdownDirective; }),] }] },
        { type: NgZone },
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] }
    ]; };
    AngularDropdownContentComponent.propDecorators = {
        dropdownClass: [{ type: Input }],
        overlay: [{ type: Input }],
        transitioningInClass: [{ type: Input }],
        transitionedInClass: [{ type: Input }],
        transitioningOutClass: [{ type: Input }]
    };
    return AngularDropdownContentComponent;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
var AngularDropdownModule = /** @class */ (function () {
    function AngularDropdownModule() {
    }
    AngularDropdownModule.decorators = [
        { type: NgModule, args: [{
                    imports: [CommonModule, NgWormholeModule],
                    declarations: [
                        AngularDropdownDirective,
                        AngularDropdownControlDirective,
                        AngularDropdownContentComponent
                    ],
                    exports: [
                        AngularDropdownDirective,
                        AngularDropdownControlDirective,
                        AngularDropdownContentComponent
                    ]
                },] }
    ];
    return AngularDropdownModule;
}());

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */

export { AngularDropdownContentComponent, AngularDropdownControlDirective, AngularDropdownDirective, AngularDropdownModule };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYW5ndWxhci1kcm9wZG93bi5qcy5tYXAiLCJzb3VyY2VzIjpbIm5nOi8vYW5ndWxhci1kcm9wZG93bi9saWIvYW5ndWxhci1kcm9wZG93bi1jb250cm9sLmRpcmVjdGl2ZS50cyIsIm5nOi8vYW5ndWxhci1kcm9wZG93bi9saWIvdXRpbHMudHMiLCJuZzovL2FuZ3VsYXItZHJvcGRvd24vbGliL2FuZ3VsYXItZHJvcGRvd24uZGlyZWN0aXZlLnRzIiwibmc6Ly9hbmd1bGFyLWRyb3Bkb3duL2xpYi9hbmd1bGFyLWRyb3Bkb3duLWNvbnRlbnQuY29tcG9uZW50LnRzIiwibmc6Ly9hbmd1bGFyLWRyb3Bkb3duL2xpYi9hbmd1bGFyLWRyb3Bkb3duLm1vZHVsZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBEaXJlY3RpdmUsXG4gIEVsZW1lbnRSZWYsXG4gIEluamVjdCxcbiAgZm9yd2FyZFJlZixcbiAgSW5wdXQsXG4gIEhvc3QsXG4gIEhvc3RMaXN0ZW5lclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlIH1cbiAgZnJvbSAnLi9hbmd1bGFyLWRyb3Bkb3duLmRpcmVjdGl2ZSc7XG5cbkBEaXJlY3RpdmUoe1xuICBzZWxlY3RvcjogJ1tuZy1kcm9wZG93bi1jb250cm9sXSxbbmdEcm9wZG93bkNvbnRyb2xdJyxcbiAgaG9zdDoge1xuICAgICdbYXR0ci5hcmlhLWhhc3BvcHVwXSc6ICd0cnVlJyxcbiAgICAnW2F0dHIuYXJpYS1jb250cm9sc10nOiAnZHJvcGRvd24uaWQnLFxuICAgICdbYXR0ci5hcmlhLWV4cGFuZGVkXSc6ICdkcm9wZG93bi5pc09wZW4nLFxuICAgICdbY2xhc3MubmctZHJvcGRvd24tY29udHJvbF0nOiAndHJ1ZScsXG4gICAgJ1tjbGFzcy5hY3RpdmVdJzogJ2Ryb3Bkb3duLmlzT3BlbidcbiAgfVxufSlcbmV4cG9ydCBjbGFzcyBBbmd1bGFyRHJvcGRvd25Db250cm9sRGlyZWN0aXZlIHtcbiAgQEhvc3RMaXN0ZW5lcignY2xpY2snLCBbICckZXZlbnQnIF0pXG4gIG9uQ2xpY2soZTogRXZlbnQpOiB2b2lkIHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgaWYgKCF0aGlzLmRyb3Bkb3duLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLmRyb3Bkb3duLnRvZ2dsZSgpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgICAgQEhvc3QoKVxuICAgICAgQEluamVjdChmb3J3YXJkUmVmKCgpID0+IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSkpXG4gICAgICBwdWJsaWMgZHJvcGRvd246IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSxcbiAgICAgIHB1YmxpYyBlbGVtZW50OiBFbGVtZW50UmVmKSB7XG4gIH1cbn1cbiIsImV4cG9ydCBmdW5jdGlvbiB3YWl0Rm9yQW5pbWF0aW9uKFxuICBlbGVtZW50OiBFbGVtZW50IHwgbnVsbCxcbiAgY2FsbGJhY2s6IChlPzogRXZlbnQpID0+IGFueVxuKTogdm9pZCB7XG4gIGlmIChlbGVtZW50ID09PSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XG5cbiAgICBpZiAoXG4gICAgICBjb21wdXRlZFN0eWxlLmFuaW1hdGlvbk5hbWUgIT09ICdub25lJyAmJlxuICAgICAgY29tcHV0ZWRTdHlsZS5hbmltYXRpb25QbGF5U3RhdGUgPT09ICdydW5uaW5nJ1xuICAgICkge1xuICAgICAgcmV0dXJuIG9uY2UoZWxlbWVudCwgJ2FuaW1hdGlvbmVuZCcsIGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBjYWxsYmFjaygpO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gb25jZShcbiAgZWxlbWVudDogTm9kZSxcbiAgZXZlbnROYW1lOiBzdHJpbmcsXG4gIGxpc3RlbmVyOiAoZTogRXZlbnQpID0+IGFueVxuKTogdm9pZCB7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGZ1bmN0aW9uIGxpc3Rlbk9uY2UoZSkge1xuICAgIGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGxpc3Rlbk9uY2UpO1xuXG4gICAgcmV0dXJuIGxpc3RlbmVyKGUpO1xuICB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGNsb3Nlc3Q6IChlbGVtZW50OiBFbGVtZW50LCBzZWxlY3Rvcjogc3RyaW5nKSA9PiBFbGVtZW50IHwgbnVsbCA9XG4gICh3aW5kb3cgYXMgYW55KS5FbGVtZW50ICYmIEVsZW1lbnQucHJvdG90eXBlLmNsb3Nlc3RcbiAgICA/IChlbCwgcykgPT4gZWwuY2xvc2VzdChzKVxuICAgIDogZnVuY3Rpb24gX2Nsb3Nlc3Qoc2VsZjogRWxlbWVudCwgczogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG1hdGNoZXMgPSAoXG4gICAgICAgICAgKHNlbGYgYXMgYW55KS5kb2N1bWVudCB8fCBzZWxmLm93bmVyRG9jdW1lbnRcbiAgICAgICAgKS5xdWVyeVNlbGVjdG9yQWxsKHMpO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IGVsOiBFbGVtZW50IHwgbnVsbCA9IHNlbGY7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpID0gbWF0Y2hlcy5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKC0taSA+PSAwICYmIG1hdGNoZXMuaXRlbShpKSAhPT0gZWwpIHt9XG4gICAgICAgIH0gd2hpbGUgKGkgPCAwICYmIChlbCA9IGVsLnBhcmVudEVsZW1lbnQpKTtcbiAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgfTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBvc2l0aW9uKFxuICB0cmlnZ2VyOiBFbGVtZW50LFxuICBkcm9wZG93bjogRWxlbWVudCxcbiAge1xuICAgIGhvcml6b250YWxQb3NpdGlvbixcbiAgICB2ZXJ0aWNhbFBvc2l0aW9uLFxuICAgIG1hdGNoVHJpZ2dlcldpZHRoLFxuICAgIHByZXZpb3VzSG9yaXpvbnRhbFBvc2l0aW9uLFxuICAgIHByZXZpb3VzVmVydGljYWxQb3NpdGlvblxuICB9OiBhbnlcbik6IGFueSB7XG4gIC8vIENvbGxlY3QgaW5mb3JtYXRpb24gYWJvdXQgYWxsIHRoZSBpbnZvbHZlZCBET00gZWxlbWVudHNcbiAgY29uc3Qgc2Nyb2xsID0geyBsZWZ0OiB3aW5kb3cucGFnZVhPZmZzZXQsIHRvcDogd2luZG93LnBhZ2VZT2Zmc2V0IH07XG4gIGNvbnN0IHtcbiAgICBsZWZ0OiB0cmlnZ2VyTGVmdCxcbiAgICB0b3A6IHRyaWdnZXJUb3AsXG4gICAgd2lkdGg6IHRyaWdnZXJXaWR0aCxcbiAgICBoZWlnaHQ6IHRyaWdnZXJIZWlnaHRcbiAgfSA9IHRyaWdnZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGxldCB7XG4gICAgaGVpZ2h0OiBkcm9wZG93bkhlaWdodCxcbiAgICB3aWR0aDogZHJvcGRvd25XaWR0aFxuICB9ID0gZHJvcGRvd24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGNvbnN0IHZpZXdwb3J0V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgY29uc3Qgc3R5bGU6IGFueSA9IHt9O1xuXG4gIC8vIENhbGN1bGF0ZSBkcm9wIGRvd24gd2lkdGhcbiAgZHJvcGRvd25XaWR0aCA9IG1hdGNoVHJpZ2dlcldpZHRoID8gdHJpZ2dlcldpZHRoIDogZHJvcGRvd25XaWR0aDtcbiAgaWYgKG1hdGNoVHJpZ2dlcldpZHRoKSB7XG4gICAgc3R5bGUud2lkdGggPSBkcm9wZG93bldpZHRoO1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIGhvcml6b250YWwgcG9zaXRpb25cbiAgY29uc3QgdHJpZ2dlckxlZnRXaXRoU2Nyb2xsID0gdHJpZ2dlckxlZnQgKyBzY3JvbGwubGVmdDtcbiAgaWYgKGhvcml6b250YWxQb3NpdGlvbiA9PT0gJ2F1dG8nKSB7XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBudW1iZXIgb2YgdmlzaWJsZSBob3Jpem9udGFsIHBpeGVscyBpZiB3ZSB3ZXJlIHRvIHBsYWNlIHRoZVxuICAgIC8vIGRyb3Bkb3duIG9uIHRoZSBsZWZ0IGFuZCByaWdodFxuICAgIGNvbnN0IGxlZnRWaXNpYmxlID1cbiAgICAgIE1hdGgubWluKHZpZXdwb3J0V2lkdGgsIHRyaWdnZXJMZWZ0ICsgZHJvcGRvd25XaWR0aCkgLVxuICAgICAgTWF0aC5tYXgoMCwgdHJpZ2dlckxlZnQpO1xuICAgIGNvbnN0IHJpZ2h0VmlzaWJsZSA9XG4gICAgICBNYXRoLm1pbih2aWV3cG9ydFdpZHRoLCB0cmlnZ2VyTGVmdCArIHRyaWdnZXJXaWR0aCkgLVxuICAgICAgTWF0aC5tYXgoMCwgdHJpZ2dlckxlZnQgKyB0cmlnZ2VyV2lkdGggLSBkcm9wZG93bldpZHRoKTtcblxuICAgIGlmIChkcm9wZG93bldpZHRoID4gbGVmdFZpc2libGUgJiYgcmlnaHRWaXNpYmxlID4gbGVmdFZpc2libGUpIHtcbiAgICAgIC8vIElmIHRoZSBkcm9wIGRvd24gd29uJ3QgZml0IGxlZnQtYWxpZ25lZCwgYW5kIHRoZXJlIGlzIG1vcmUgc3BhY2Ugb24gdGhlXG4gICAgICAvLyByaWdodCB0aGFuIG9uIHRoZSBsZWZ0LCB0aGVuIGZvcmNlIHJpZ2h0LWFsaWduZWRcbiAgICAgIGhvcml6b250YWxQb3NpdGlvbiA9ICdyaWdodCc7XG4gICAgfSBlbHNlIGlmIChkcm9wZG93bldpZHRoID4gcmlnaHRWaXNpYmxlICYmIGxlZnRWaXNpYmxlID4gcmlnaHRWaXNpYmxlKSB7XG4gICAgICAvLyBJZiB0aGUgZHJvcCBkb3duIHdvbid0IGZpdCByaWdodC1hbGlnbmVkLCBhbmQgdGhlcmUgaXMgbW9yZSBzcGFjZSBvblxuICAgICAgLy8gdGhlIGxlZnQgdGhhbiBvbiB0aGUgcmlnaHQsIHRoZW4gZm9yY2UgbGVmdC1hbGlnbmVkXG4gICAgICBob3Jpem9udGFsUG9zaXRpb24gPSAnbGVmdCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEtlZXAgc2FtZSBwb3NpdGlvbiBhcyBwcmV2aW91c1xuICAgICAgaG9yaXpvbnRhbFBvc2l0aW9uID0gcHJldmlvdXNIb3Jpem9udGFsUG9zaXRpb24gfHwgJ2xlZnQnO1xuICAgIH1cbiAgfVxuICBpZiAoaG9yaXpvbnRhbFBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgc3R5bGUucmlnaHQgPSB2aWV3cG9ydFdpZHRoIC0gKHRyaWdnZXJMZWZ0V2l0aFNjcm9sbCArIHRyaWdnZXJXaWR0aCk7XG4gIH0gZWxzZSBpZiAoaG9yaXpvbnRhbFBvc2l0aW9uID09PSAnY2VudGVyJykge1xuICAgIHN0eWxlLmxlZnQgPSB0cmlnZ2VyTGVmdFdpdGhTY3JvbGwgKyAodHJpZ2dlcldpZHRoIC0gZHJvcGRvd25XaWR0aCkgLyAyO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLmxlZnQgPSB0cmlnZ2VyTGVmdFdpdGhTY3JvbGw7XG4gIH1cblxuICAvLyBDYWxjdWxhdGUgdmVydGljYWwgcG9zaXRpb25cbiAgY29uc3QgdHJpZ2dlclRvcFdpdGhTY3JvbGwgPSB0cmlnZ2VyVG9wICsgc2Nyb2xsLnRvcDtcbiAgaWYgKHZlcnRpY2FsUG9zaXRpb24gPT09ICdhYm92ZScpIHtcbiAgICBzdHlsZS50b3AgPSB0cmlnZ2VyVG9wV2l0aFNjcm9sbCAtIGRyb3Bkb3duSGVpZ2h0O1xuICB9IGVsc2UgaWYgKHZlcnRpY2FsUG9zaXRpb24gPT09ICdiZWxvdycpIHtcbiAgICBzdHlsZS50b3AgPSB0cmlnZ2VyVG9wV2l0aFNjcm9sbCArIHRyaWdnZXJIZWlnaHQ7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgdmlld3BvcnRCb3R0b20gPSBzY3JvbGwudG9wICsgc2VsZi53aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgY29uc3QgZW5vdWdoUm9vbUJlbG93ID1cbiAgICAgIHRyaWdnZXJUb3BXaXRoU2Nyb2xsICsgdHJpZ2dlckhlaWdodCArIGRyb3Bkb3duSGVpZ2h0IDwgdmlld3BvcnRCb3R0b207XG4gICAgY29uc3QgZW5vdWdoUm9vbUFib3ZlID0gdHJpZ2dlclRvcCA+IGRyb3Bkb3duSGVpZ2h0O1xuXG4gICAgaWYgKFxuICAgICAgcHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uID09PSAnYmVsb3cnICYmXG4gICAgICAhZW5vdWdoUm9vbUJlbG93ICYmXG4gICAgICBlbm91Z2hSb29tQWJvdmVcbiAgICApIHtcbiAgICAgIHZlcnRpY2FsUG9zaXRpb24gPSAnYWJvdmUnO1xuICAgIH0gZWxzZSBpZiAoXG4gICAgICBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb24gPT09ICdhYm92ZScgJiZcbiAgICAgICFlbm91Z2hSb29tQWJvdmUgJiZcbiAgICAgIGVub3VnaFJvb21CZWxvd1xuICAgICkge1xuICAgICAgdmVydGljYWxQb3NpdGlvbiA9ICdiZWxvdyc7XG4gICAgfSBlbHNlIGlmICghcHJldmlvdXNWZXJ0aWNhbFBvc2l0aW9uKSB7XG4gICAgICB2ZXJ0aWNhbFBvc2l0aW9uID0gZW5vdWdoUm9vbUJlbG93ID8gJ2JlbG93JyA6ICdhYm92ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZlcnRpY2FsUG9zaXRpb24gPSBwcmV2aW91c1ZlcnRpY2FsUG9zaXRpb247XG4gICAgfVxuICAgIHN0eWxlLnRvcCA9XG4gICAgICB0cmlnZ2VyVG9wV2l0aFNjcm9sbCArXG4gICAgICAodmVydGljYWxQb3NpdGlvbiA9PT0gJ2JlbG93JyA/IHRyaWdnZXJIZWlnaHQgOiAtZHJvcGRvd25IZWlnaHQpO1xuICB9XG5cbiAgcmV0dXJuIHsgaG9yaXpvbnRhbFBvc2l0aW9uLCB2ZXJ0aWNhbFBvc2l0aW9uLCBzdHlsZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlSW5QbGFjZVBvc2l0aW9uKFxuICB0cmlnZ2VyOiBFbGVtZW50LFxuICBkcm9wZG93bjogRWxlbWVudCxcbiAgeyBob3Jpem9udGFsUG9zaXRpb24sIHZlcnRpY2FsUG9zaXRpb24gfTogYW55XG4pIHtcbiAgbGV0IGRyb3Bkb3duUmVjdDtcbiAgY29uc3QgcG9zaXRpb25EYXRhOiBhbnkgPSB7fTtcblxuICBpZiAoaG9yaXpvbnRhbFBvc2l0aW9uID09PSAnYXV0bycpIHtcbiAgICBjb25zdCB0cmlnZ2VyUmVjdCA9IHRyaWdnZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgZHJvcGRvd25SZWN0ID0gZHJvcGRvd24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgY29uc3Qgdmlld3BvcnRSaWdodCA9IHdpbmRvdy5wYWdlWE9mZnNldCArIHdpbmRvdy5pbm5lcldpZHRoO1xuICAgIHBvc2l0aW9uRGF0YS5ob3Jpem9udGFsUG9zaXRpb24gPVxuICAgICAgdHJpZ2dlclJlY3QubGVmdCArIGRyb3Bkb3duUmVjdC53aWR0aCA+IHZpZXdwb3J0UmlnaHQgPyAncmlnaHQnIDogJ2xlZnQnO1xuICB9XG4gIGlmICh2ZXJ0aWNhbFBvc2l0aW9uID09PSAnYWJvdmUnKSB7XG4gICAgcG9zaXRpb25EYXRhLnZlcnRpY2FsUG9zaXRpb24gPSB2ZXJ0aWNhbFBvc2l0aW9uO1xuICAgIGRyb3Bkb3duUmVjdCA9IGRyb3Bkb3duUmVjdCB8fCBkcm9wZG93bi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBwb3NpdGlvbkRhdGEuc3R5bGUgPSB7IHRvcDogLWRyb3Bkb3duUmVjdC5oZWlnaHQgfTtcbiAgfVxuICByZXR1cm4gcG9zaXRpb25EYXRhO1xufVxuIiwiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgQmVoYXZpb3JTdWJqZWN0LCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgc2tpcCwgZmlyc3QsIGZpbHRlciB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBEaXJlY3RpdmUsXG4gIEF0dHJpYnV0ZSxcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBFbGVtZW50UmVmLFxuICBBZnRlclZpZXdJbml0LFxuICBPbkNoYW5nZXMsXG4gIENvbnRlbnRDaGlsZCxcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgRXZlbnRFbWl0dGVyLFxuICBRdWVyeUxpc3QsXG4gIFZpZXdDb250YWluZXJSZWYsXG4gIGZvcndhcmRSZWZcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IERPQ1VNRU5UIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi1jb250cm9sLmRpcmVjdGl2ZSc7XG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50IH0gZnJvbSAnLi9hbmd1bGFyLWRyb3Bkb3duLWNvbnRlbnQuY29tcG9uZW50JztcblxuaW1wb3J0IHsgY2FsY3VsYXRlUG9zaXRpb24sIGNhbGN1bGF0ZUluUGxhY2VQb3NpdGlvbiB9IGZyb20gJy4vdXRpbHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFuZ3VsYXJEcm9wZG93blBvc2l0aW9uQ2hhbmdlcyB7XG4gIHZQb3NpdGlvbjogJ2Fib3ZlJyB8ICdiZWxvdyc7XG4gIGhQb3NpdGlvbjogJ3JpZ2h0JyB8ICdjZW50ZXInIHwgJ2xlZnQnO1xufVxuXG5sZXQgX2lkID0gMTtcbmZ1bmN0aW9uIGdlbmVyYXRlRHJvcGRvd25JZCgpIHtcbiAgcmV0dXJuIF9pZCsrO1xufVxuXG5leHBvcnQgdHlwZSBWZXJ0aWNhbFBvc2l0aW9uID0gJ2F1dG8nIHwgJ2Fib3ZlJyB8ICdiZWxvdyc7XG5leHBvcnQgdHlwZSBIb3Jpem9udGFsUG9zaXRpb24gPSAnYXV0bycgfCAncmlnaHQnIHwgJ2NlbnRlcicgfCAnbGVmdCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRHJvcGRvd25Db250ZW50UG9zaXRpb24ge1xuICByZWFkb25seSBoUG9zaXRpb246IEhvcml6b250YWxQb3NpdGlvbiB8IG51bGw7XG4gIHJlYWRvbmx5IHZQb3NpdGlvbjogVmVydGljYWxQb3NpdGlvbiB8IG51bGw7XG4gIHJlYWRvbmx5IHRvcDogc3RyaW5nIHwgbnVsbDtcbiAgcmVhZG9ubHkgbGVmdDogc3RyaW5nIHwgbnVsbDtcbiAgcmVhZG9ubHkgYm90dG9tOiBzdHJpbmcgfCBudWxsO1xuICByZWFkb25seSByaWdodDogc3RyaW5nIHwgbnVsbDtcbn1cblxuY29uc3QgRW1wdHlEcm9wZG93bkNvbnRlbnRQb3NpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICB2UG9zaXRpb246IG51bGwsXG4gIGhQb3NpdGlvbjogbnVsbCxcbiAgdG9wOiBudWxsLFxuICBsZWZ0OiBudWxsLFxuICBib3R0b206IG51bGwsXG4gIHJpZ2h0OiBudWxsXG59KTtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnbmctZHJvcGRvd24sW25nRHJvcGRvd25dLFtuZy1kcm9wZG93bl0nLFxuICBob3N0OiB7XG4gICAgJ1tjbGFzcy5yZW5kZXItaW4tcGxhY2VdJzogJ3JlbmRlckluUGxhY2UnLFxuICAgICdbY2xhc3MubmctZHJvcGRvd25dJzogJ3RydWUnXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlIGltcGxlbWVudHMgT25DaGFuZ2VzIHtcbiAgaWQ/OiBzdHJpbmc7XG5cbiAgQElucHV0KClcbiAgcmVuZGVySW5QbGFjZSA9IGZhbHNlO1xuXG4gIEBDb250ZW50Q2hpbGQoQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSlcbiAgY29udHJvbDogQW5ndWxhckRyb3Bkb3duQ29udHJvbERpcmVjdGl2ZSB8IG51bGwgPSBudWxsO1xuXG4gIHByZXZpb3VzVmVydGljYWxQb3NpdGlvbjogVmVydGljYWxQb3NpdGlvbiB8IG51bGwgPSBudWxsO1xuICBwcmV2aW91c0hvcml6b250YWxQb3NpdGlvbjogSG9yaXpvbnRhbFBvc2l0aW9uIHwgbnVsbCA9IG51bGw7XG4gIG1hdGNoVHJpZ2dlcldpZHRoID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBfaXNPcGVuJCA9IG5ldyBCZWhhdmlvclN1YmplY3QoZmFsc2UpO1xuICBpc09wZW4kID0gdGhpcy5faXNPcGVuJC5waXBlKHNraXAoMSkpO1xuXG4gIHBvc2l0aW9uJCA9IG5ldyBCZWhhdmlvclN1YmplY3Q8UmVhZG9ubHk8RHJvcGRvd25Db250ZW50UG9zaXRpb24+PihcbiAgICBFbXB0eURyb3Bkb3duQ29udGVudFBvc2l0aW9uXG4gICk7XG5cbiAgZ2V0IGRyb3Bkb3duSWQoKSB7XG4gICAgcmV0dXJuIGBuZy1kcm9wZG93bi1jb250ZW50LSR7dGhpcy51bmlxdWVJZH1gO1xuICB9XG5cbiAgQElucHV0KClcbiAgY2FsY3VsYXRlUG9zaXRpb246IEZ1bmN0aW9uID0gY2FsY3VsYXRlUG9zaXRpb247XG4gIEBJbnB1dCgpXG4gIGNhbGN1bGF0ZUluUGxhY2VQb3NpdGlvbjogRnVuY3Rpb24gPSBjYWxjdWxhdGVJblBsYWNlUG9zaXRpb247XG5cbiAgQElucHV0KClcbiAgZGlzYWJsZWQgPSBmYWxzZTtcblxuICBASW5wdXQoKVxuICBiZWZvcmVPcGVuOiAoKCkgPT4gYm9vbGVhbiB8IE9ic2VydmFibGU8Ym9vbGVhbj4pIHwgbnVsbCA9IG51bGw7XG5cbiAgQElucHV0KClcbiAgYmVmb3JlQ2xvc2U6ICgoKSA9PiBib29sZWFuIHwgT2JzZXJ2YWJsZTxib29sZWFuPikgfCBudWxsID0gbnVsbDtcblxuICBASW5wdXQoKVxuICBwdWJsaWMgdmVydGljYWxQb3NpdGlvbjogVmVydGljYWxQb3NpdGlvbiA9ICdhdXRvJztcbiAgQElucHV0KClcbiAgcHVibGljIGhvcml6b250YWxQb3NpdGlvbjogSG9yaXpvbnRhbFBvc2l0aW9uID0gJ2F1dG8nO1xuXG4gIEBPdXRwdXQoJ29wZW4nKVxuICBvbk9wZW4gPSB0aGlzLmlzT3BlbiQucGlwZShmaWx0ZXIob3BlbiA9PiBvcGVuID09PSB0cnVlKSk7XG5cbiAgQE91dHB1dCgnY2xvc2UnKVxuICBvbkNsb3NlID0gdGhpcy5pc09wZW4kLnBpcGUoZmlsdGVyKG9wZW4gPT4gb3BlbiA9PT0gZmFsc2UpKTtcblxuICBnZXQgdHJpZ2dlckVsZW1lbnQoKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5jb250cm9sICYmIHRoaXMuY29udHJvbC5lbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gIH1cblxuICBnZXQgZHJvcGRvd25FbGVtZW50KCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kcm9wZG93bklkKTtcbiAgfVxuXG4gIEBDb250ZW50Q2hpbGQoZm9yd2FyZFJlZigoKSA9PiBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50KSlcbiAgcHJpdmF0ZSBkcm9wZG93bkNvbnRlbnQ/OiBBbmd1bGFyRHJvcGRvd25Db250ZW50Q29tcG9uZW50O1xuXG4gIHByaXZhdGUgdW5pcXVlSWQ6IG51bWJlciB8IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHdpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBkb2N1bWVudDogRG9jdW1lbnQ7XG5cbiAgY29uc3RydWN0b3IoQEluamVjdChET0NVTUVOVCkgZG9jdW1lbnQ6IGFueSwgQEF0dHJpYnV0ZSgnaWQnKSBpZD86IHN0cmluZykge1xuICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB0aGlzLmluaXRpYWxpemVJZChpZCk7XG4gICAgdGhpcy5jcmVhdGVEZWZhdWx0V29ybWhvbGVPdXRsZXQoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKHsgZGlzYWJsZWQgfTogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgIGlmIChcbiAgICAgIGRpc2FibGVkICYmXG4gICAgICBkaXNhYmxlZC5maXJzdENoYW5nZSA9PT0gZmFsc2UgJiZcbiAgICAgIGRpc2FibGVkLmN1cnJlbnRWYWx1ZSA9PT0gdHJ1ZSAmJlxuICAgICAgZGlzYWJsZWQucHJldmlvdXNWYWx1ZSAhPT0gdHJ1ZVxuICAgICkge1xuICAgICAgdGhpcy5kaXNhYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgb3BlbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCB0aGlzLl9pc09wZW4kLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgb3BlbiQgPSBvZih0cnVlKTtcblxuICAgIGlmICh0aGlzLmJlZm9yZU9wZW4pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuYmVmb3JlT3BlbigpO1xuICAgICAgb3BlbiQgPSByZXN1bHQgaW5zdGFuY2VvZiBPYnNlcnZhYmxlID8gcmVzdWx0IDogb2YocmVzdWx0KTtcbiAgICB9XG5cbiAgICBvcGVuJFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpcnN0KCksXG4gICAgICAgIGZpbHRlcihvcGVuID0+IG9wZW4gPT09IHRydWUpXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuX2lzT3BlbiQubmV4dCh0cnVlKSk7XG4gIH1cblxuICBjbG9zZShza2lwRm9jdXMgPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICF0aGlzLl9pc09wZW4kLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgY2xvc2UkID0gb2YodHJ1ZSk7XG5cbiAgICBpZiAodGhpcy5iZWZvcmVDbG9zZSkge1xuICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5iZWZvcmVDbG9zZSgpO1xuICAgICAgY2xvc2UkID0gcmVzdWx0IGluc3RhbmNlb2YgT2JzZXJ2YWJsZSA/IHJlc3VsdCA6IG9mKHJlc3VsdCk7XG4gICAgfVxuXG4gICAgY2xvc2UkXG4gICAgICAucGlwZShcbiAgICAgICAgZmlyc3QoKSxcbiAgICAgICAgZmlsdGVyKGNsb3NlID0+IGNsb3NlID09PSB0cnVlKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywge1xuICAgICAgICAgIGhQb3NpdGlvbjogbnVsbCxcbiAgICAgICAgICB2UG9zaXRpb246IG51bGwsXG4gICAgICAgICAgdG9wOiBudWxsLFxuICAgICAgICAgIHJpZ2h0OiBudWxsLFxuICAgICAgICAgIGJvdHRvbTogbnVsbCxcbiAgICAgICAgICBsZWZ0OiBudWxsLFxuICAgICAgICAgIHdpZHRoOiBudWxsLFxuICAgICAgICAgIHByZXZpb3VzVmVydGljYWxQb3NpdGlvbjogbnVsbCxcbiAgICAgICAgICBwcmV2aW91c0hvcml6b250YWxQb3NpdGlvbjogbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5faXNPcGVuJC5uZXh0KGZhbHNlKTtcblxuICAgICAgICBpZiAoIXNraXBGb2N1cykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlckVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJlxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyRWxlbWVudC50YWJJbmRleCA+IC0xXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXJFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIHRvZ2dsZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5faXNPcGVuJC5nZXRWYWx1ZSgpKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMub3BlbigpO1xuICAgIH1cbiAgfVxuXG4gIGRpc2FibGUoKTogdm9pZCB7XG4gICAgdGhpcy5kaXNhYmxlZCA9IHRydWU7XG4gICAgdGhpcy5jbG9zZSgpO1xuICB9XG5cbiAgZW5hYmxlKCk6IHZvaWQge1xuICAgIHRoaXMuZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHJlcG9zaXRpb24gPSAoKTogQW5ndWxhckRyb3Bkb3duUG9zaXRpb25DaGFuZ2VzIHwgbnVsbCA9PiB7XG4gICAgaWYgKCF0aGlzLl9pc09wZW4kLmdldFZhbHVlKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGRyb3Bkb3duRWxlbWVudCA9IHRoaXMuZHJvcGRvd25FbGVtZW50O1xuICAgIGlmICghZHJvcGRvd25FbGVtZW50IHx8ICF0aGlzLnRyaWdnZXJFbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBfY2FsY3VsYXRlUG9zaXRpb24gPSB0aGlzLnJlbmRlckluUGxhY2VcbiAgICAgID8gdGhpcy5jYWxjdWxhdGVJblBsYWNlUG9zaXRpb25cbiAgICAgIDogdGhpcy5jYWxjdWxhdGVQb3NpdGlvbjtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBob3Jpem9udGFsUG9zaXRpb246IHRoaXMuaG9yaXpvbnRhbFBvc2l0aW9uLFxuICAgICAgdmVydGljYWxQb3NpdGlvbjogdGhpcy52ZXJ0aWNhbFBvc2l0aW9uLFxuICAgICAgbWF0Y2hUcmlnZ2VyV2lkdGg6IHRoaXMubWF0Y2hUcmlnZ2VyV2lkdGgsXG4gICAgICBwcmV2aW91c0hvcml6b250YWxQb3NpdGlvbjogdGhpcy5wcmV2aW91c0hvcml6b250YWxQb3NpdGlvbixcbiAgICAgIHByZXZpb3VzVmVydGljYWxQb3NpdGlvbjogdGhpcy5wcmV2aW91c1ZlcnRpY2FsUG9zaXRpb25cbiAgICB9O1xuXG4gICAgY29uc3QgcG9zaXRpb25EYXRhID0gX2NhbGN1bGF0ZVBvc2l0aW9uKFxuICAgICAgdGhpcy50cmlnZ2VyRWxlbWVudCxcbiAgICAgIGRyb3Bkb3duRWxlbWVudCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuYXBwbHlSZXBvc2l0aW9uKFxuICAgICAgdGhpcy50cmlnZ2VyRWxlbWVudCxcbiAgICAgIGRyb3Bkb3duRWxlbWVudCxcbiAgICAgIHBvc2l0aW9uRGF0YVxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSBhcHBseVJlcG9zaXRpb24oXG4gICAgdHJpZ2dlcjogRWxlbWVudCxcbiAgICBkcm9wZG93bjogSFRNTEVsZW1lbnQsXG4gICAgcG9zaXRpb25zOiBhbnlcbiAgKTogQW5ndWxhckRyb3Bkb3duUG9zaXRpb25DaGFuZ2VzIHtcbiAgICBjb25zdCBjaGFuZ2VzOiBhbnkgPSB7XG4gICAgICBoUG9zaXRpb246IHBvc2l0aW9ucy5ob3Jpem9udGFsUG9zaXRpb24sXG4gICAgICB2UG9zaXRpb246IHBvc2l0aW9ucy52ZXJ0aWNhbFBvc2l0aW9uXG4gICAgfTtcbiAgICBpZiAocG9zaXRpb25zLnN0eWxlKSB7XG4gICAgICBjaGFuZ2VzLnRvcCA9IGAke3Bvc2l0aW9ucy5zdHlsZS50b3B9cHhgO1xuICAgICAgLy8gVGhlIGNvbXBvbmVudCBjYW4gYmUgYWxpZ25lZCBmcm9tIHRoZSByaWdodCBvciBmcm9tIHRoZSBsZWZ0LCBidXQgbm90IGZyb20gYm90aC5cbiAgICAgIGlmIChwb3NpdGlvbnMuc3R5bGUubGVmdCAhPSBudWxsKSB7XG4gICAgICAgIGNoYW5nZXMubGVmdCA9IGAke3Bvc2l0aW9ucy5zdHlsZS5sZWZ0fXB4YDtcbiAgICAgICAgY2hhbmdlcy5yaWdodCA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHBvc2l0aW9ucy5zdHlsZS5yaWdodCAhPSBudWxsKSB7XG4gICAgICAgIGNoYW5nZXMucmlnaHQgPSBgJHtwb3NpdGlvbnMuc3R5bGUucmlnaHR9cHhgO1xuICAgICAgICBjaGFuZ2VzLmxlZnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgaWYgKHBvc2l0aW9ucy5zdHlsZS53aWR0aCAhPSBudWxsKSB7XG4gICAgICAgIGNoYW5nZXMud2lkdGggPSBgJHtwb3NpdGlvbnMuc3R5bGUud2lkdGh9cHhgO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMucG9zaXRpb24kLmdldFZhbHVlKCkudG9wID09IG51bGwpIHtcbiAgICAgICAgLy8gQnlwYXNzIG9uIHRoZSBmaXJzdCByZXBvc2l0aW9uIG9ubHkgdG8gYXZvaWQgZmxpY2tlcmluZy5cbiAgICAgICAgT2JqZWN0LmtleXMocG9zaXRpb25zLnN0eWxlKS5mb3JFYWNoKFxuICAgICAgICAgIGsgPT4gKGRyb3Bkb3duLnN0eWxlW2sgYXMgYW55XSA9IHBvc2l0aW9ucy5zdHlsZVtrXSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnBvc2l0aW9uJC5uZXh0KGNoYW5nZXMpO1xuXG4gICAgdGhpcy5wcmV2aW91c0hvcml6b250YWxQb3NpdGlvbiA9IHBvc2l0aW9ucy5ob3Jpem9udGFsUG9zaXRpb247XG4gICAgdGhpcy5wcmV2aW91c1ZlcnRpY2FsUG9zaXRpb24gPSBwb3NpdGlvbnMudmVydGljYWxQb3NpdGlvbjtcblxuICAgIHJldHVybiBjaGFuZ2VzO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0aWFsaXplSWQoaWQ/OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoaWQpIHtcbiAgICAgIHRoaXMuaWQgPSB0aGlzLnVuaXF1ZUlkID0gaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudW5pcXVlSWQgPSBnZW5lcmF0ZURyb3Bkb3duSWQoKTtcbiAgICAgIHRoaXMuaWQgPSBgbmctZHJvcGRvd24tJHt0aGlzLnVuaXF1ZUlkfWA7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjcmVhdGVEZWZhdWx0V29ybWhvbGVPdXRsZXQoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZy1kcm9wZG93bi1vdXRsZXQnKSkge1xuICAgICAgY29uc3Qgb3V0bGV0ID0gdGhpcy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG91dGxldC5pZCA9ICduZy1kcm9wZG93bi1vdXRsZXQnO1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5Lmluc2VydEJlZm9yZShvdXRsZXQsIHRoaXMuZG9jdW1lbnQuYm9keS5maXJzdENoaWxkKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IHRha2VVbnRpbCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHtcbiAgQ29tcG9uZW50LFxuICBJbnB1dCxcbiAgSG9zdCxcbiAgSW5qZWN0LFxuICBmb3J3YXJkUmVmLFxuICBBZnRlclZpZXdDaGVja2VkLFxuICBPbkluaXQsXG4gIE9uRGVzdHJveSxcbiAgTmdab25lXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBET0NVTUVOVCB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgY2xvc2VzdCwgd2FpdEZvckFuaW1hdGlvbiB9IGZyb20gJy4vdXRpbHMnO1xuXG5jb25zdCBNdXRhdGlvbk9ic2VydmVyID0gKHdpbmRvdyBhcyBhbnkpLk11dGF0aW9uT2JzZXJ2ZXI7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ25nLWRyb3Bkb3duLWNvbnRlbnQsW25nLWRyb3Bkb3duLWNvbnRlbnRdLFtuZ0Ryb3Bkb3duQ29udGVudF0nLFxuICB0ZW1wbGF0ZVVybDogJy4vYW5ndWxhci1kcm9wZG93bi1jb250ZW50LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vYW5ndWxhci1kcm9wZG93bi1jb250ZW50LmNvbXBvbmVudC5jc3MnXSxcbiAgaG9zdDoge1xuICAgICdbY2xhc3MucmVuZGVyLWluLXBsYWNlXSc6ICdkcm9wZG93bi5yZW5kZXJJblBsYWNlJ1xuICB9XG59KVxuZXhwb3J0IGNsYXNzIEFuZ3VsYXJEcm9wZG93bkNvbnRlbnRDb21wb25lbnRcbiAgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0NoZWNrZWQsIE9uRGVzdHJveSB7XG4gIEBJbnB1dCgpXG4gIGRyb3Bkb3duQ2xhc3MgPSAnJztcblxuICBASW5wdXQoKVxuICBvdmVybGF5ID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBoYXNNb3ZlZCA9IGZhbHNlO1xuICBwcml2YXRlIF9hbmltYXRpb25DbGFzczogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaXNUb3VjaERldmljZTogYm9vbGVhbiA9ICdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdztcbiAgcHJpdmF0ZSBtdXRhdGlvbk9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZGVzdHJveSQgPSBuZXcgU3ViamVjdDx2b2lkPigpO1xuXG4gIEBJbnB1dCgpXG4gIHRyYW5zaXRpb25pbmdJbkNsYXNzID0gJ25nLWRyb3Bkb3duLWNvbnRlbnQtLXRyYW5zaXRpb25pbmctaW4nO1xuICBASW5wdXQoKVxuICB0cmFuc2l0aW9uZWRJbkNsYXNzID0gJ25nLWRyb3Bkb3duLWNvbnRlbnQtLXRyYW5zaXRpb25lZC1pbic7XG4gIEBJbnB1dCgpXG4gIHRyYW5zaXRpb25pbmdPdXRDbGFzcyA9ICduZy1kcm9wZG93bi1jb250ZW50LS10cmFuc2l0aW9uaW5nLW91dCc7XG5cbiAgcHJpdmF0ZSBnZXQgZHJvcGRvd25FbGVtZW50KCk6IEhUTUxFbGVtZW50IHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuZHJvcGRvd24uZHJvcGRvd25FbGVtZW50O1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRPcGVuID0gZmFsc2U7XG4gIHByaXZhdGUgZG9jdW1lbnQ6IERvY3VtZW50O1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBIb3N0KClcbiAgICBASW5qZWN0KGZvcndhcmRSZWYoKCkgPT4gQW5ndWxhckRyb3Bkb3duRGlyZWN0aXZlKSlcbiAgICBwdWJsaWMgZHJvcGRvd246IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSxcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcbiAgICBASW5qZWN0KERPQ1VNRU5UKSBkb2N1bWVudDogYW55XG4gICkge1xuICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgfVxuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuZHJvcGRvd24ub25PcGVuXG4gICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAuc3Vic2NyaWJlKCgpID0+ICh0aGlzLnNob3VsZE9wZW4gPSB0cnVlKSk7XG5cbiAgICB0aGlzLmRyb3Bkb3duLm9uQ2xvc2VcbiAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgfVxuXG4gIHNldCBhbmltYXRpb25DbGFzcyhjbGFzc05hbWU6IHN0cmluZyB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5kcm9wZG93bkVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIGlmICh0aGlzLl9hbmltYXRpb25DbGFzcyAmJiBjbGFzc05hbWUgIT09IHRoaXMuX2FuaW1hdGlvbkNsYXNzKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fYW5pbWF0aW9uQ2xhc3MpO1xuICAgICAgfSBlbHNlIGlmIChjbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9hbmltYXRpb25DbGFzcyA9IGNsYXNzTmFtZTtcbiAgfVxuXG4gIGdldCBhbmltYXRpb25DbGFzcygpOiBzdHJpbmcgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5fYW5pbWF0aW9uQ2xhc3M7XG4gIH1cblxuICBnZXQgdHJpZ2dlckVsZW1lbnQoKTogRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmRyb3Bkb3duLnRyaWdnZXJFbGVtZW50O1xuICB9XG5cbiAgbmdBZnRlclZpZXdDaGVja2VkKCkge1xuICAgIGlmICh0aGlzLnNob3VsZE9wZW4pIHtcbiAgICAgIHRoaXMuYW5pbWF0aW9uQ2xhc3MgPSB0aGlzLnRyYW5zaXRpb25pbmdJbkNsYXNzO1xuICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMub3BlbigpKTtcbiAgICAgIHRoaXMuc2hvdWxkT3BlbiA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgIHRoaXMudGVhcmRvd25FdmVudHMoKTtcbiAgfVxuXG4gIG9wZW4oKTogdm9pZCB7XG4gICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAnbW91c2Vkb3duJyxcbiAgICAgIHRoaXMuaGFuZGxlUm9vdE1vdXNlRG93bixcbiAgICAgIHRydWVcbiAgICApO1xuXG4gICAgaWYgKHRoaXMuaXNUb3VjaERldmljZSkge1xuICAgICAgdGhpcy5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICd0b3VjaHN0YXJ0JyxcbiAgICAgICAgdGhpcy50b3VjaFN0YXJ0SGFuZGxlcixcbiAgICAgICAgdHJ1ZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAndG91Y2hlbmQnLFxuICAgICAgICB0aGlzLmhhbmRsZVJvb3RNb3VzZURvd24sXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgY2hhbmdlcyA9IHRoaXMuZHJvcGRvd24ucmVwb3NpdGlvbigpO1xuICAgIGlmICghdGhpcy5kcm9wZG93bi5yZW5kZXJJblBsYWNlKSB7XG4gICAgICB0aGlzLmFkZEdsb2JhbEV2ZW50cygpO1xuICAgICAgdGhpcy5zdGFydE9ic2VydmluZ0RvbU11dGF0aW9ucygpO1xuICAgIH0gZWxzZSBpZiAoY2hhbmdlcyAhPT0gbnVsbCAmJiBjaGFuZ2VzLnZQb3NpdGlvbiA9PT0gJ2Fib3ZlJykge1xuICAgICAgdGhpcy5zdGFydE9ic2VydmluZ0RvbU11dGF0aW9ucygpO1xuICAgIH1cblxuICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmFuaW1hdGVJbigpKTtcbiAgfVxuXG4gIGNsb3NlKCk6IHZvaWQge1xuICAgIHRoaXMudGVhcmRvd25FdmVudHMoKTtcbiAgICB0aGlzLmFuaW1hdGVPdXQoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVwb3NpdGlvbkluWm9uZSA9ICgpID0+XG4gICAgdGhpcy56b25lLnJ1bigoKSA9PiB0aGlzLmRyb3Bkb3duLnJlcG9zaXRpb24oKSk7XG5cbiAgcHJpdmF0ZSBhbmltYXRlSW4oKTogdm9pZCB7XG4gICAgd2FpdEZvckFuaW1hdGlvbih0aGlzLmRyb3Bkb3duRWxlbWVudCwgKCkgPT4ge1xuICAgICAgdGhpcy5hbmltYXRpb25DbGFzcyA9IHRoaXMudHJhbnNpdGlvbmVkSW5DbGFzcztcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgYW5pbWF0ZU91dCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kcm9wZG93bkVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwYXJlbnRFbGVtZW50ID0gdGhpcy5kcm9wZG93bi5yZW5kZXJJblBsYWNlXG4gICAgICA/IHRoaXMuZHJvcGRvd25FbGVtZW50LnBhcmVudEVsZW1lbnQhLnBhcmVudEVsZW1lbnQhXG4gICAgICA6IHRoaXMuZHJvcGRvd25FbGVtZW50LnBhcmVudEVsZW1lbnQhO1xuICAgIGNvbnN0IGNsb25lID0gdGhpcy5kcm9wZG93bkVsZW1lbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xuICAgIGNsb25lLmlkID0gYCR7dGhpcy5kcm9wZG93bkVsZW1lbnQuaWR9LS1jbG9uZWA7XG4gICAgY2xvbmUuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLnRyYW5zaXRpb25lZEluQ2xhc3MpO1xuICAgIGNsb25lLmNsYXNzTGlzdC5yZW1vdmUodGhpcy50cmFuc2l0aW9uaW5nSW5DbGFzcyk7XG4gICAgY2xvbmUuY2xhc3NMaXN0LmFkZCh0aGlzLnRyYW5zaXRpb25pbmdPdXRDbGFzcyk7XG4gICAgcGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgdGhpcy5hbmltYXRpb25DbGFzcyA9IHRoaXMudHJhbnNpdGlvbmluZ0luQ2xhc3M7XG4gICAgd2FpdEZvckFuaW1hdGlvbihjbG9uZSwgKCkgPT4gcGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChjbG9uZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVSb290TW91c2VEb3duID0gKGU6IEV2ZW50KTogdm9pZCA9PiB7XG4gICAgY29uc3QgeyB0YXJnZXQgfSA9IGUgYXMgRXZlbnQgJiB7IHRhcmdldDogRWxlbWVudCB9O1xuXG4gICAgaWYgKFxuICAgICAgdGhpcy5oYXNNb3ZlZCB8fFxuICAgICAgKHRoaXMuZHJvcGRvd25FbGVtZW50ICE9PSBudWxsICYmXG4gICAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50LmNvbnRhaW5zKHRhcmdldCkpIHx8XG4gICAgICAodGhpcy50cmlnZ2VyRWxlbWVudCAhPT0gbnVsbCAmJiB0aGlzLnRyaWdnZXJFbGVtZW50LmNvbnRhaW5zKHRhcmdldCkpXG4gICAgKSB7XG4gICAgICB0aGlzLmhhc01vdmVkID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2xvc2VzdERyb3Bkb3duID0gY2xvc2VzdCh0YXJnZXQsICduZy1kcm9wZG93bi1jb250ZW50Jyk7XG4gICAgaWYgKGNsb3Nlc3REcm9wZG93biAhPT0gbnVsbCkge1xuICAgICAgY29uc3QgdHJpZ2dlciA9IHRoaXMuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYFthcmlhLWNvbnRyb2xzPSR7Y2xvc2VzdERyb3Bkb3duLmdldEF0dHJpYnV0ZSgnaWQnKX1dYFxuICAgICAgKTtcbiAgICAgIGNvbnN0IHBhcmVudERyb3Bkb3duID0gY2xvc2VzdCh0cmlnZ2VyISwgJ25nLWRyb3Bkb3duLWNvbnRlbnQnKTtcbiAgICAgIGlmIChcbiAgICAgICAgcGFyZW50RHJvcGRvd24gIT09IG51bGwgJiZcbiAgICAgICAgcGFyZW50RHJvcGRvd24uZ2V0QXR0cmlidXRlKCdpZCcpID09PSB0aGlzLmRyb3Bkb3duLmRyb3Bkb3duSWRcbiAgICAgICkge1xuICAgICAgICB0aGlzLmhhc01vdmVkID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmRyb3Bkb3duLmNsb3NlKHRydWUpO1xuICB9O1xuXG4gIHByaXZhdGUgc3RhcnRPYnNlcnZpbmdEb21NdXRhdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKE11dGF0aW9uT2JzZXJ2ZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5tdXRhdGlvbk9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9uczogYW55KSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBtdXRhdGlvbnNbMF0uYWRkZWROb2Rlcy5sZW5ndGggfHxcbiAgICAgICAgICBtdXRhdGlvbnNbMF0ucmVtb3ZlZE5vZGVzLmxlbmd0aFxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLnJlcG9zaXRpb25JblpvbmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIhLm9ic2VydmUodGhpcy5kcm9wZG93bkVsZW1lbnQhLCB7XG4gICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50IS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnRE9NTm9kZUluc2VydGVkJyxcbiAgICAgICAgdGhpcy5yZXBvc2l0aW9uSW5ab25lLFxuICAgICAgICBmYWxzZVxuICAgICAgKTtcbiAgICAgIHRoaXMuZHJvcGRvd25FbGVtZW50IS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAnRE9NTm9kZVJlbW92ZWQnLFxuICAgICAgICB0aGlzLnJlcG9zaXRpb25JblpvbmUsXG4gICAgICAgIGZhbHNlXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgc3RvcE9ic2VydmluZ0RvbU11dGF0aW9ucygpOiB2b2lkIHtcbiAgICBpZiAoTXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgaWYgKHRoaXMubXV0YXRpb25PYnNlcnZlcikge1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICB0aGlzLm11dGF0aW9uT2JzZXJ2ZXIgPSBudWxsO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5kcm9wZG93bkVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAnRE9NTm9kZUluc2VydGVkJyxcbiAgICAgICAgICB0aGlzLnJlcG9zaXRpb25JblpvbmVcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICAnRE9NTm9kZVJlbW92ZWQnLFxuICAgICAgICAgIHRoaXMucmVwb3NpdGlvbkluWm9uZVxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYWRkR2xvYmFsRXZlbnRzKCk6IHZvaWQge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLnJlcG9zaXRpb25JblpvbmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLnJlcG9zaXRpb25JblpvbmUpO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdvcmllbnRhdGlvbmNoYW5nZScsIHRoaXMucmVwb3NpdGlvbkluWm9uZSk7XG4gIH1cblxuICBwcml2YXRlIHJlbW92ZUdsb2JhbEV2ZW50cygpOiB2b2lkIHtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5yZXBvc2l0aW9uSW5ab25lKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5yZXBvc2l0aW9uSW5ab25lKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignb3JpZW50YXRpb25jaGFuZ2UnLCB0aGlzLnJlcG9zaXRpb25JblpvbmUpO1xuICB9XG5cbiAgcHJpdmF0ZSB0b3VjaFN0YXJ0SGFuZGxlciA9IChlOiBFdmVudCkgPT4ge1xuICAgIHRoaXMuZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgJ3RvdWNobW92ZScsXG4gICAgICB0aGlzLnRvdWNoTW92ZUhhbmRsZXIsXG4gICAgICB0cnVlXG4gICAgKTtcbiAgfTtcblxuICBwcml2YXRlIHRvdWNoTW92ZUhhbmRsZXIgPSAoZTogRXZlbnQpID0+IHtcbiAgICB0aGlzLmhhc01vdmVkID0gdHJ1ZTtcbiAgICB0aGlzLmRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICd0b3VjaG1vdmUnLFxuICAgICAgdGhpcy50b3VjaE1vdmVIYW5kbGVyLFxuICAgICAgdHJ1ZVxuICAgICk7XG4gIH07XG5cbiAgcHJpdmF0ZSB0ZWFyZG93bkV2ZW50cygpIHtcbiAgICB0aGlzLnJlbW92ZUdsb2JhbEV2ZW50cygpO1xuICAgIHRoaXMuc3RvcE9ic2VydmluZ0RvbU11dGF0aW9ucygpO1xuICAgIHRoaXMuZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgJ21vdXNlZG93bicsXG4gICAgICB0aGlzLmhhbmRsZVJvb3RNb3VzZURvd24sXG4gICAgICB0cnVlXG4gICAgKTtcblxuICAgIGlmICh0aGlzLmlzVG91Y2hEZXZpY2UpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKFxuICAgICAgICAndG91Y2hzdGFydCcsXG4gICAgICAgIHRoaXMudG91Y2hTdGFydEhhbmRsZXIsXG4gICAgICAgIHRydWVcbiAgICAgICk7XG4gICAgICB0aGlzLmRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgJ3RvdWNoZW5kJyxcbiAgICAgICAgdGhpcy5oYW5kbGVSb290TW91c2VEb3duLFxuICAgICAgICB0cnVlXG4gICAgICApO1xuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmltcG9ydCB7IE5nV29ybWhvbGVNb2R1bGUgfSBmcm9tICduZy13b3JtaG9sZSc7XG5cbmltcG9ydCB7IEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgQW5ndWxhckRyb3Bkb3duQ29udGVudENvbXBvbmVudCB9IGZyb20gJy4vYW5ndWxhci1kcm9wZG93bi1jb250ZW50LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBBbmd1bGFyRHJvcGRvd25Db250cm9sRGlyZWN0aXZlIH0gZnJvbSAnLi9hbmd1bGFyLWRyb3Bkb3duLWNvbnRyb2wuZGlyZWN0aXZlJztcblxuQE5nTW9kdWxlKHtcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgTmdXb3JtaG9sZU1vZHVsZV0sXG4gIGRlY2xhcmF0aW9uczogW1xuICAgIEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSxcbiAgICBBbmd1bGFyRHJvcGRvd25Db250cm9sRGlyZWN0aXZlLFxuICAgIEFuZ3VsYXJEcm9wZG93bkNvbnRlbnRDb21wb25lbnRcbiAgXSxcbiAgZXhwb3J0czogW1xuICAgIEFuZ3VsYXJEcm9wZG93bkRpcmVjdGl2ZSxcbiAgICBBbmd1bGFyRHJvcGRvd25Db250cm9sRGlyZWN0aXZlLFxuICAgIEFuZ3VsYXJEcm9wZG93bkNvbnRlbnRDb21wb25lbnRcbiAgXVxufSlc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